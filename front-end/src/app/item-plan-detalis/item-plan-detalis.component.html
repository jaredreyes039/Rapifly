<app-header></app-header>

<!-- Page Content -->
<div class="page-content">
    <app-top-header></app-top-header>
    <div class="page-inner no-page-title">

        <!-- INSTRUCTION MODAL -->
        <!-- ONLY OPENS ON USER INITIAL VISIT -->
        <!-- ACCESSIBLE FROM THE ADMIN PANEL BY SELECTING 'GETTING STARTED' -->
        <div *ngIf="keepGetStartedOpenOnVist" [hidden]="!instructionBoxOpen" class="modal" style="display: unset !important;" id="myModal" tabindex="-1" aria-labelledby="myModalLabel"
        [ngClass]="instructionBoxOpen ? 'backdrop-active' : ''">
        <div class="modal-dialog" style="min-width: 880px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button (click)="toggleInstructionBox()" type="button" class="close" data-dismiss="modal" aria-label="Close"
                    ><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Welcome || <span style="color: yellow;">{{currentuser.user.first_name}} {{currentuser.user.last_name}}</span> </h4>
                </div>
                <div class="modal-body" style="display: flex; flex-direction: column;">
                    <h3 style="border-bottom: 2px solid yellow; padding-bottom: 12px;">Getting Started</h3>
                    <p>
                        Welcome to Rapifly, a community-centered, problem-oriented dashboard designed
                        to find solutions through a unique methodology- Create, Execute, Evaluate <strong>(CEE)</strong>.
                    </p>
                    <p>To the left you have the Admin Panel, HUD, Project Tree, Module Tree (when active), and Alerts</p>
                    <ul>
                        <li style="margin-bottom: 12px;">The <strong>Admin Panel</strong> is a guide to all things project creation, control, security, and assistance. With access
                            to the Coaches Corner- a contact catalogue of the latest experts across various fields- you'll find the Admin
                            Panel will soon be one of your greatest tools.
                        </li>
                        <li style="margin-bottom: 12px;">
                            The <strong>HUD</strong> is the heart of Rapifly, and here is where the beauty of the CEE methodology exists. With the
                            ability to quickly navigate a problem-centered project/task throughout the CEE methodology, the HUD is a powerful tool
                            that you'll soon be well acquainted with.
                        </li>
                        <li style="margin-bottom: 12px;">
                            The <strong>Project</strong> and <strong>Module Trees</strong> are quick navigation views of you and your team's
                            overall project hierarchy.
                        </li>
                    </ul>
                    <p>
                        That's a lot of power, feeling a bit overwhelmed? It's okay, getting started is incredibly simple- fill out
                        a project profile, and soon you'll find yourself deeply invested in the power of the CEE methodology. <strong>Welcome
                        {{currentuser.user.first_name}}, to Rapifly!</strong>
                    </p>
                    <br>
                    <p style="text-align: center; background-color: #524fb1; width: 66%; border-radius: 4px; align-self: center;">
                        To see this again, click on 'Getting Started' under the Admin Panel!
                    </p>
                </div>
            </div>
        </div>
        </div>
        <div *ngIf="instructionBoxOpen && !keepGetStartedOpenOnVist" [hidden]="!instructionBoxOpen || keepGetStartedOpenOnVist" class="modal" style="display: unset !important;" id="myModal" tabindex="-1" aria-labelledby="myModalLabel"
        [ngClass]="instructionBoxOpen ? 'backdrop-active' : ''">
        <div class="modal-dialog" style="min-width: 880px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button (click)="toggleInstructionBox()" type="button" class="close" data-dismiss="modal" aria-label="Close"
                    ><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Welcome || <span style="color: yellow;">{{currentuser.user.first_name}} {{currentuser.user.last_name}}</span> </h4>
                </div>
                <div class="modal-body" style="display: flex; flex-direction: column;">
                    <h3 style="border-bottom: 2px solid yellow; padding-bottom: 12px;">Getting Started</h3>
                    <p>
                        Welcome to Rapifly, a community-centered, problem-oriented dashboard designed
                        to find solutions through a unique methodology- Create, Execute, Evaluate <strong>(CEE)</strong>.
                    </p>
                    <p>To the left you have the Admin Panel, HUD, Project Tree, Module Tree (when active), and Alerts</p>
                    <ul>
                        <li style="margin-bottom: 12px;">The <strong>Admin Panel</strong> is a guide to all things project creation, control, security, and assistance. With access
                            to the Coaches Corner- a contact catalogue of the latest experts across various fields- you'll find the Admin
                            Panel will soon be one of your greatest tools.
                        </li>
                        <li style="margin-bottom: 12px;">
                            The <strong>HUD</strong> is the heart of Rapifly, and here is where the beauty of the CEE methodology exists. With the
                            ability to quickly navigate a problem-centered project/task throughout the CEE methodology, the HUD is a powerful tool
                            that you'll soon be well acquainted with.
                        </li>
                        <li style="margin-bottom: 12px;">
                            The <strong>Project</strong> and <strong>Module Trees</strong> are quick navigation views of you and your team's
                            overall project hierarchy.
                        </li>
                    </ul>
                    <p>
                        That's a lot of power, feeling a bit overwhelmed? It's okay, getting started is incredibly simple- fill out
                        a project profile, and soon you'll find yourself deeply invested in the power of the CEE methodology. <strong>Welcome
                        {{currentuser.user.first_name}}, to Rapifly!</strong>
                    </p>
                    <br>
                    <p style="text-align: center; background-color: #524fb1; width: 66%; border-radius: 4px; align-self: center;">
                        To see this again, click on 'Getting Started' under the Admin Panel!
                    </p>
                </div>
            </div>
        </div>
        </div>

        <!-- ADMIN PANEL -->
        <div class="col-md-3">
            <div class="panel-body">
                <!-- <div class="page-title">
                    <h3>HUD</h3>
                </div> -->
                <div class="panel-group" id="accordion2" role="tablist" aria-multiselectable="true">
                    <div class="panel panel-cutom-blue hud" id="style-2">
                        <div>
                            <div class="panel-heading panel-green" role="tab" id="headingOne1">
                                <h4 class="panel-title text-center">
                                    <a aria-controls="collapseOne">Admin Panelâ€‹</a>
                                </h4>
                            </div>
                            <div class="panel-body">
                                <div class="col-md-12 space-stage text-center">
                                    <p (click)="selectPanel('user')" title="User" class="cursor-pointer"
                                        [ngClass]="{'active-phase' : selectedPhase == 'user'}">
                                        User
                                    </p><p>&nbsp;|</p>
                                    <p (click)="selectPanel('project')" title="Project" class="cursor-pointer"
                                        [ngClass]="{'active-phase' : selectedPhase == 'project'}">
                                        Project
                                    </p><p>&nbsp;|</p>
                                    <p (click)="selectPanel('team')" title="Team" class="cursor-pointer"
                                        [ngClass]="{'active-phase' : selectedPhase == 'team'}">
                                        Team
                                    </p><p>&nbsp;|</p>
                                    <p (click)="selectPanel('security')" title="Security" class="cursor-pointer"
                                        [ngClass]="{'active-phase' : selectedPhase == 'security'}">
                                        Security
                                    </p>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="col-md-12 space-stage">
                                    <p class="cursor-pointor"><a routerLink='/coaches-corner'>Coaches
                                        Corner&nbsp;&nbsp;<i class="fa fa-caret-right"></i></a></p>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="col-md-12 space-stage">
                                    <p (click)="toggleInstructionBox()" class="get-started-toggle" style="border-right: 1px solid #fff; width: 33%; text-align: center;"><strong>Getting Started</strong></p>
                                    <p  style="margin-left: 6px; color: yellow;">Create a project profile under CREATE in the HUD. Click 'Getting Started' for more...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- HUD UI -->

                    <div class="panel panel-cutom-blue hud" id="style-2">
                        <div class="panel-heading panel-green" role="tab" id="headingOne1">
                            <h4 class="panel-title text-center">
                                <a aria-controls="collapseOne">HUD</a>
                            </h4>
                        </div>

                        <!-- STAGE -->
                        <div class="panel-body">
                            <div class="col-md-3 space-stage">
                                <p>Stage:</p>
                            </div>
                            <div class="col-md-9 space-stage">
                                <p (click)="selecteStage('create'); selectPhase('project')" title="Create" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedStage == 'create'}">
                                    Create
                                </p><p>&nbsp;|</p>
                                <p (click)="selecteStage('execute')" title="Execute" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedStage == 'execute'}">
                                    Execute
                                </p><p>&nbsp;|</p>
                                <p (click)="selecteStage('evaluate')" title="Deactivate" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedStage == 'evaluate'}">
                                    Evaluate
                                </p>
                            </div>
                        </div>

                        <!-- PHASE -->
                        <div class="panel-body">
                            <div class="col-md-3 space-stage">
                                <p>Phase:</p>
                            </div>
                            <div class="col-md-9 space-stage" *ngIf="selectedStage == 'create'">
                                <p (click)="selectPhase('B')" title="Brainstorm" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'B'}">
                                    {{ (selectedPhase == 'B') ? 'Brainstorm' : 'B' }}
                                </p><p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('P') : throwToastrError('Must select a parent item first.')" title="Prioritize" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'P'}">
                                    {{ (selectedPhase == 'P') ? 'Prioritize' : 'P' }}
                                </p><p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('D') : throwToastrError('Must select a parent item first.')" title="Deactivate" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'D'}">
                                    {{ (selectedPhase == 'D') ? 'Deactivate' : 'D' }}
                                </p><p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('PR') : throwToastrError('Must select a parent item first.')" title="Propose" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'PR'}">
                                    {{ (selectedPhase == 'PR') ? 'Propose' : 'P' }}
                                </p><p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('V') : throwToastrError('Must select a parent item first.')" title="Vote" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'V'}">
                                    {{ (selectedPhase == 'V') ? 'Vote' : 'V' }}
                                </p><p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('S') : throwToastrError('Must select a parent item first.')" title="Select" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'S'}">
                                    {{ (selectedPhase == 'S') ? 'Select' : 'S' }}
                                </p>
                            </div>
                            <div class="col-md-9 space-stage" *ngIf="selectedStage == 'execute'">
                                <p (click)="parentIsActiveSelection ? selectPhase('DG') : throwToastrError('Must select a parent item first.')" title="Delegate" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'DG'}">
                                    {{ (selectedPhase == 'DG') ? 'Delegate' : 'D' }}
                                </p><p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('C') : throwToastrError('Must select a parent item first.')" title="Countdown" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'C'}">
                                    {{ (selectedPhase == 'C') ? 'Countdown' : 'C' }}
                                </p><p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('L') : throwToastrError('Must select a parent item first.')" title="Launch" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'L'}">
                                    {{ (selectedPhase == 'L') ? 'Launch' : 'L' }}
                            </div>
                            <div class="col-md-9 space-stage" *ngIf="selectedStage == 'evaluate'">
                                <p (click)="parentIsActiveSelection ? selectPhase('R') : throwToastrError('Must select a parent item first.')" title="Report" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'R'}">
                                    {{ (selectedPhase == 'R') ? 'Report' : 'R' }}
                                </p>
                                <p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('M') : throwToastrError('Must select a parent item first.')" title="Measure" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'M'}">
                                    {{ (selectedPhase == 'M') ? 'Measure' : 'M' }}
                                </p><p>&nbsp;|</p>
                                <p (click)="parentIsActiveSelection ? selectPhase('I') : throwToastrError('Must select a parent item first.')" title="improve" class="cursor-pointer"
                                    [ngClass]="{'active-phase' : selectedPhase == 'I'}">
                                    {{ (selectedPhase == 'I') ? 'improve' : 'I' }}
                                </p>
                            </div>
                        </div>
                        <div class="col-md-3 space-stage">
                            <p>Challenges: </p>
                        </div>
                        <div class="col-md-9 space-stage">
                            <p title="Opportunity" class="cursor-pointer" (click)="selectedPhase == 'B' ? selectModule('opportunity') : throwToastrError('Must be in brainstorm phase.')"
                            [ngClass]="{'active-phase' : selectedModules == 'opportunity' && selectedPhase == 'B'}">
                                Opportunity
                            </p><p>&nbsp;|</p>
                            <p title="Problem" class="cursor-pointer" (click)="selectedPhase == 'B' ? selectModule('problem') : throwToastrError('Must be in brainstorm phase.')"
                            [ngClass]="{'active-phase' : selectedModules == 'problem' && selectedPhase == 'B'}">
                                Problem
                            </p>
                        </div>
                        <!-- MODULE -->
                        <div class="panel-body">
                            <div class="col-md-3 space-stage">
                                <p>Modules:</p>
                            </div>
                            <div class="col-md-9 space-stage">
                                <p title="Stretegy" class="cursor-pointer" (click)="selectModule('strategy')"
                                    [ngClass]="{'active-phase' : selectedModules == 'strategy'}">
                                    {{ (selectedModules == 'strategy') ? 'Strategy' : 'S' }}
                                </p><p>&nbsp;|</p>
                                <p title="task" class="cursor-pointer" (click)="selectModule('task')"
                                    [ngClass]="{'active-phase' : selectedModules == 'task'}">
                                    {{ (selectedModules == 'task') ? 'Task' : 'T' }}
                                </p><p>&nbsp;|</p>
                                <p title="Motive" class="cursor-pointer" (click)="selectModule('motive')"
                                    [ngClass]="{'active-phase' : selectedModules == 'motive'}">
                                    {{ (selectedModules == 'motive') ? 'Motive' : 'M' }}
                                </p><p>&nbsp;|</p>
                                <p title="Analysis" class="cursor-pointer" (click)="selectModule('analysis')"
                                    [ngClass]="{'active-phase' : selectedModules == 'analysis'}">
                                    {{ (selectedModules == 'analysis') ? 'Analysis' : 'A' }}
                                </p><p>&nbsp;|</p>
                                <p title="Intelligence" class="cursor-pointer" (click)="selectModule('intelligence')"
                                    [ngClass]="{'active-phase' : selectedModules == 'intelligence'}">
                                    {{ (selectedModules == 'intelligence') ? 'Intelligence' : 'I' }}
                                </p>
                            </div>

                        </div>
                    </div>


                    <div class="page-title">
                        <h3>Project</h3>
                    </div>
                    <div class="panel panel-cutom-blue ">
                        <div class="panel-heading panel-green">
                            <h4 class="panel-title">
                                <a aria-controls="collapseTwo">Project Tree</a>
                            </h4>
                        </div>
                        <div id="2" class="panel-collapse collapse in projecttree" role="tabpanel"
                            aria-labelledby="headingTwo2" id="style-2">
                            <div class="">
                                <div id="jstree">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-cutom-blue" *ngIf="selectedModules && selectedModules != ''">
                        <div class="panel-heading panel-green">
                            <h4 class="panel-title">
                                <a aria-controls="collapseTwo">{{ textDecoration(selectedModules) }} Tree</a>
                            </h4>
                        </div>
                        <div id="3" class="panel-collapse collapse in projecttree" role="tabpanel"
                            aria-labelledby="headingTwo2" id="style-3">
                            <div class="">
                                <div id="jstree-module-tree">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="page-title">
                        <h3>Alerts</h3>
                    </div>
                    <div class="panel panel-cutom-blue ">
                        <div>
                            <div class="panel-heading panel-aler" role="tab" id="headingThree3">
                                <h4 class="panel-title" style="display: flex; justify-content: space-between; align-items: center;">
                                    <a aria-controls="collapseTwo">{{alertView}} Alerts</a>
                                    <button class="btn-primary" style="border: none;" (click)="toggleAlertView()">
                                        <mat-icon>swap_horiz</mat-icon>
                                    </button>
                                </h4>
                            </div>
                            <div class="hud" id="style-2" style="margin-top: 12px;">
                                <div class="col-md-12" *ngIf="filteredAlerts && filteredAlerts.length > 0 && alertView == 'Launch'">
                                    <div *ngFor="let p of filteredAlerts;">
                                        <div class="alert alert-caution" role="alert" *ngIf="p.alert_type == 'Moderate'"> 
                                            <strong>{{p.short_name}}</strong> launch date in less than <strong>7 days</strong>.
                                            <br>
                                            <strong>Launch Date: </strong>{{p.end_date}}
                                            <strong></strong>
                                        </div>
                                        <div class="alert alert-danger" role="alert" *ngIf="p.alert_type == 'Severe'"> 
                                            <strong>{{p.short_name}}</strong> launch date in less than <strong>3 days</strong>.
                                            <br>
                                            <strong>Launch Date: </strong>{{p.end_date}}
                                            <strong></strong>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 text-center" *ngIf="alertdata && alertdata.length == 0">
                                    <h5>Alert not found.</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PARENT ITEM PROJECT PROFILE DISPLAY -->

        <div class="col-md-9" *ngIf="parentplanDetails[0] && parentplanDetails[0] != '' && selectedPhase !='project' && selectedPhase != 'user'
        && selectedPhase != 'team' && selectedPhase !== 'security' && selectedPhase != 'coaches-corner' "
        [hidden]="!parentIsActiveSelection">
            <div class="page-title">
                Project Profile
            </div>
            <div class="panel panel-cutom-blue">
                <div class="panel-body">
                    <div style="padding: 10px;">
                        <div class="text-right" style="display: flex; margin-bottom: 24px; justify-content: flex-end;">
                            <div style="display: flex; justify-content: space-evenly; width: 20%;">
                            <button routerLink="/item-plans/{{ goalplanid }}" class="btn btn-warning"><i
                                    class="fa fa-comments"></i></button>
                            <button *ngIf="currentuser.user.email == 'jaredreyes039@gmail.com'" [hidden]="currentuser.user.email !== 'jaredreyes039@gmail.com'" (click)="deletePlanById(parentplanDetails[0]._id)" class="btn btn-danger" style="display: flex; align-items: center; justify-content: center;">
                                <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                                    <path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"/>
                                </svg>                            
                            </button>
                            <button (click)="openFeedbackModal()" class="btn btn-primary" style="display: flex; align-items: center; justify-content: center;">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="16" height="16">
                                    <path d="M256 0c53 0 96 43 96 96v3.6c0 15.7-12.7 28.4-28.4 28.4H188.4c-15.7 0-28.4-12.7-28.4-28.4V96c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7 .7 1.3 1.4 1.9 2.1c14.2-7.3 30.4-11.4 47.5-11.4H312c17.1 0 33.2 4.1 47.5 11.4c.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7 .7-1.4 1.3-2.1 1.9c6.2 12 10.1 25.3 11.1 39.5H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H416c0 24.6-5.5 47.8-15.4 68.6c2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6V240c0-8.8-7.2-16-16-16s-16 7.2-16 16V479.2c-34.5-3.4-65.8-17.8-90.3-39.6L86.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H96.3c1.1-14.1 5-27.5 11.1-39.5c-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"/>
                                </svg>                          
                            </button>
                        </div>
                        </div>
                        <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div  style="display: flex;  margin-bottom: 12px;">
                                        <div class="parent-item-label">Short Name:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{parentplanDetails[0].short_name}}</div>
                                    </div>
                                    <div  style="display: flex; margin-bottom: 12px;">
                                        <div class="parent-item-label">Long Name:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{parentplanDetails[0].long_name}}</div>
                                    </div>
                                    <div  style="display: flex;">
                                        <div class="parent-item-label">Creator:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{parentplanDetails[0].user_id.first_name}} {{parentplanDetails[0].user_id.last_name}}</div>
                                    </div>
                                </div>
                                
                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div style="display: flex; margin-bottom: 12px;">
                                        <div class=" parent-item-label">Start Date:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{parentplanDetails[0].start_date | itemplanitemdate }}</div>
                                    </div>
                                    <div style="display: flex;">
                                        <div class=" parent-item-label">End Date:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{parentplanDetails[0].end_date | itemplanitemdate }}</div>
                                    </div>
                                </div>
                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div style="display: flex; margin-bottom: 12px;">
                                        <div class=" parent-item-label parent-item-label-alert">Production Target:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{parentplanDetails[0].production_target }}</div>
                                    </div>
                                    <div style="display: flex;">
                                        <div class=" parent-item-label parent-item-label-alert">Expense Target:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{parentplanDetails[0].expense_target }}</div>
                                    </div>
                                </div>
                        </div>
                        <div style="display: flex; margin-bottom: 24px;">
                            <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                <div class=" parent-item-label-spec">Description</div>
                                <p style="border-left: 2px solid #fff; padding-left: 24px;">{{parentplanDetails[0].description}}</p>
                            </div>
                        </div>
                        <hr>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header class="page-title" style="margin-bottom: 12px;">
                                <h3>Additional Fields</h3>
                            </mat-expansion-panel-header>
                        <div  *ngFor="let parentplan of parentplanDetails[0] | keyvalue ">
                            <div style="display: flex; flex-direction: column;"
                                *ngIf="parentplan.key !='_id' && parentplan.key !='shared_permission_users' && parentplan.key !='share_users' && parentplan.key !='shared_plan_users' && parentplan.key !='user_group_id' && parentplan.key !='number' && parentplan.key !='motivation' && parentplan.value " [hidden]="parentplan.value==''">
                                <div style="display: flex; flex-direction: row; margin-bottom: 12px;"
                                    *ngIf="parentplan.key !='start_date' && parentplan.key !='end_date' && parentplan.key !='user_id' && parentplan.key !='security' && parentplan.key != 'short_name' && parentplan.key != 'long_name' && parentplan.key != 'production_target' && parentplan.key != 'expense_target' && parentplan.key != 'production_type'
                                    && parentplan.key != 'description' && parentplan.key != 'numbers'">
                                    <div class="parent-item-label">{{textDecoration(parentplan.key)}}:</div>
                                    <div class="text-white bg-dark parent-item-val" style="width: 100%; max-width: unset; display: flex; align-items: center;" *ngIf="parentplan.key !='userid' ">
                                        {{parentplan.value}}</div>
                                </div>
                                
                            </div>
                        </div>
                    </mat-expansion-panel>
                        <mat-expansion-panel class="expanse-panel expanse-panel-discussion">
                            <mat-expansion-panel-header class="page-title">
                                <h3>Communication</h3>
                            </mat-expansion-panel-header>
                            <div class="panel panel-cutom-blue" style="border: none; box-shadow: none;">
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-md-6 form-group">
                                            <label>Security</label>
                                            <select class="form-control">
                                                <option value="">Select Security</option>
                                                <option value="public">Public</option>
                                                <option value="private">Private</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label>Recipient</label>
                                            <input type="text" class="form-control" placeholder="Recipient">
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <label>Subject</label>
                                            <input type="text" class="form-control" placeholder="Subject">
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <textarea class="form-control" placeholder="Message"></textarea>
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label>Attachment</label>
                                            <input type="file">
                                        </div>
                                        <div class="col-md-12 form-group text-right">
                                            <button type="submit" class="btn btn-primary btn-space">Save</button>
                                            <button type="reset" class="btn btn-default">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVE FORM GROUP: PARENTPLANGROUP -->
        <!-- IF PROJECT IS SELECTED -->
        <!-- DATE IDS: 5/6 -->
        <div class="col-md-9" *ngIf="selectedPhase == 'project'">
            <form #kform="ngForm" [formGroup]="parentplangroup">
                <div class="page-title">
                    Create Project Profile
                </div>
                <div class="col-md-12 form-group text-right">
                    <button type="button" class="btn btn-warning mt-20" (click)="fetch()">Manage Additional Fields</button>
                </div>
                <div class="panel panel-cutom-blue">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-6 form-group" style="display: flex;">
                                <label class="parent-item-label">Short Name<span>*</span></label>
                                <input type="text" formControlName="short_name" class="form-control"
                                    value="{{ (planDetails && planDetails.short_name) ? planDetails.short_name : '' }}"
                                    [(ngModel)]="planDetails.short_name" placeholder="Short name"
                                    [ngClass]="{ 'is-invalid': IsLoginFormValid && jval.short_name.errors }"
                                    autocomplete="off">
                                <div *ngIf="IsLoginFormValid && jval.short_name.errors" class="invalid-feedback">
                                    <label *ngIf="jval.short_name.errors.required" class="error">Short Name is
                                        required</label>
                                </div>
                            </div>
                            <div class="col-md-6 form-group" style="display: flex;">
                                <label class="parent-item-label">Long Name<span>*</span></label>
                                <input type="text" id="long_name" formControlName="long_name" class="form-control"
                                    placeholder="Long name"
                                    [ngClass]="{ 'is-invalid': IsLoginFormValid && jval.long_name.errors }"
                                    autocomplete="off">
                                <div *ngIf="IsLoginFormValid && jval.long_name.errors" class="invalid-feedback">
                                    <!-- <div *ngIf="jval.long_name.errors.required">Long Name is required</div> -->
                                    <label *ngIf="jval.long_name.errors.required" class="error">Long Name is
                                        required</label>
                                </div>
                            </div>

                            <div class="col-md-6 form-group" style="display: flex;">
                                <label class="parent-item-label">Start Date<span>*</span></label>
                                <div class="input-group input-append bootstrap-datepicker">
                                    <input type="text" id="date-input5" formControlName="start_date"
                                        class="form-control date-picker" placeholder="Start Date" autocomplete="off">
                                    <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                            class="fa fa-calendar"></i></span>
                                </div>
                                <div *ngIf="IsLoginFormValid && jval.start_date.errors" class="invalid-feedback">
                                    <label *ngIf="jval.start_date.errors.required" class="error">Start Date is
                                        required</label>
                                </div>
                            </div>
                            <div class="col-md-6 form-group" style="display: flex;">
                                <label class="parent-item-label">End Date<span>*</span></label>
                                <div class="input-group input-append bootstrap-datepicker">
                                    <input type="text" id="date-input6" formControlName="end_date"
                                        class="form-control date-picker" placeholder="End Date" autocomplete="off">
                                    <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                            class="fa fa-calendar"></i></span>
                                </div>
                                <div *ngIf="IsLoginFormValid && jval.end_date.errors" class="invalid-feedback">
                                    <label *ngIf="jval.end_date.errors.required" class="error">End Date is
                                        required</label>
                                </div>
                            </div>

                            <div class="col-md-6 form-group" style="display: flex;">
                                <label class="parent-item-label parent-item-label-alert">Production Target</label>
                                <input type="number" class="form-control" placeholder="Production Target"
                                    formControlName="production_target"
                                    [ngClass]="{ 'is-invalid': IsLoginFormValid && jval.production_target.errors }">
                                <div *ngIf="IsLoginFormValid && jval.production_target.errors" class="invalid-feedback">
                                    <label *ngIf="jval.production_target.errors.required" class="error">Production
                                        target is required</label>
                                </div>
                            </div>
    
                            <div class="col-md-6 form-group" style="display: flex;">
                                <label class="parent-item-label parent-item-label-alert">Expense Target</label>
                                <input type="number" class="form-control" placeholder="Expense Target"
                                    formControlName="expense_target"
                                    [ngClass]="{ 'is-invalid': IsLoginFormValid && jval.expense_target.errors }">
                                <div *ngIf="IsLoginFormValid && jval.expense_target.errors" class="invalid-feedback">
                                    <label *ngIf="jval.expense_target.errors.required" class="error">Expense target is
                                        required</label>
                                </div>
                            </div>
    
                            <div class="col-md-3 form-group" style="display: flex;">
                                <label class="parent-item-label">Target Type</label>
                                <select class="form-control" formControlName="production_type">
                                    <option value="">Select Type</option>
                                    <option value="dollars">Dollars</option>
                                    <option value="units">Units</option>
                                    <option value="percentage">Percentage</option>
                                </select>
                                <div *ngIf="IsLoginFormValid && jval.production_type.errors" class="invalid-feedback">
                                    <label *ngIf="jval.production_type.errors.required" class="error">Production type is
                                        required</label>
                                </div>
                            </div>   

                            <div  class="col-md-12 form-group" style="display: flex;  margin-bottom: 12px; flex-direction: column;">

                                <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px; margin-bottom: 24px;">
                                <div class=" parent-item-label-spec">Description</div>
                                <textarea type="text" formControlName="description" class="form-control bg-dark"
                                placeholder="Click to edit description" style="border-radius: 0px; border: none; border-left: 2px solid #fff; padding-left: 12px;"></textarea>
                                <div *ngIf="submitted && f.description.errors" class="invalid-feedback">
                                    <div *ngIf="f.description.errors.required">Description is required</div>
                                </div>
                                
                                
                                </div>

                                <div class="col-md-12 form-group" style="display: flex; padding: 0px;">
                                <mat-expansion-panel  [expanded]="false" class="expanse-panel" style="width: 100%; margin-bottom: 12px !important;">
                                    <mat-expansion-panel-header class="page-title">
                                        <h3>Additional Fields</h3>
                                    </mat-expansion-panel-header>
                                    <div class="panel-cutom-blue" style="padding: 12px;">
                                        <div class="panel-body">          
                                            <div class="row">
                                                <div class="col-md-8 form-group">
                                                    <label>Share Goal(s) Permission To Users</label>
                                                    <ng-select [items]="childUsersList" bindLabel="name" placeholder="Select Users"
                                                        formControlName="share_users" appendTo="body" multiple="true"
                                                        [(ngModel)]="selectedSharedPlanUser" (change)="onChangePlan($event)">
                                                    </ng-select>
                                                </div>
                                                <div class="row"></div>
                                                <div class="col-md-6 form-group" *ngFor="let dev of datafinal">
                                                    <div *ngIf="(dev.type=='text');">
                                                        <label>{{dev.name}}<span *ngIf="dev.required=='true'">*</span></label>
                                                        <input type="text" formControlName="{{dev.name}}" id="long_name"
                                                            class="form-control" placeholder="Enter {{dev.name}}" autocomplete="off"
                                                            required="{{dev.required}}"
                                                            [ngClass]="{ 'is-invalid': IsLoginFormValid && jval[dev.name].errors }">
                                                        <div *ngIf="IsLoginFormValid && jval[dev.name].errors" class="invalid-feedback">
                                                            <label *ngIf="jval[dev.name].errors.required" class="error">{{dev.name}} is
                                                                required</label>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="(dev.type=='number');">
                                                        <label>{{dev.name}}<span *ngIf="dev.required=='true'">*</span></label>
                                                        <input type="number" formControlName="{{dev.name}}" class="form-control"
                                                            placeholder="Enter {{dev.name}}" autocomplete="off" required="{{dev.required}}"
                                                            [ngClass]="{ 'is-invalid': IsLoginFormValid && jval[dev.name].errors }">
                                                        <div *ngIf="IsLoginFormValid && jval[dev.name].errors" class="invalid-feedback">
                                                            <label *ngIf="jval[dev.name].errors.required" class="error">{{dev.name}} is
                                                                required</label>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="(dev.type=='select')">
                                                        <label>{{dev.name}}<span *ngIf="dev.required=='true'">*</span></label>
                                                        <select class="form-control" formControlName="{{dev.name}}" #selectField
                                                            required="{{dev.required}}"
                                                            [ngClass]="{ 'is-invalid': IsLoginFormValid && jval[dev.name].errors }">
                                                            <option value="">Select {{dev.name}}</option>
                                                            <option *ngFor="let plan of dev.option" value="{{plan.id}}">{{plan.id}}</option>
                                                        </select>
                                                        <div *ngIf="IsLoginFormValid && jval[dev.name].errors" class="invalid-feedback">
                                                            <label *ngIf="jval[dev.name].errors.required" class="error">{{dev.name}} is
                                                                required</label>
                                                        </div>
                                                    </div>
                                                
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    </mat-expansion-panel>
                            </div>
                            </div>
                            <div style="padding: 40px;">
                                <div class="form-group">
                                    <button type="submit" (click)="resetPlanForm()"
                                        class="btn btn-default pull-right">Reset</button>
                                    <button type="submit" (click)="submitPlanForm()"
                                        class="btn btn-primary btn-space pull-right">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </form>

            <!-- COMMUNICATION PANEL (MULTI-USER) -->
            <mat-expansion-panel  class="expanse-panel expanse-panel-discussion">
                <mat-expansion-panel-header class="page-title">
                    <h3>Communication</h3>
                </mat-expansion-panel-header>
                <div class="panel panel-cutom-blue" style="border: none; box-shadow: none;">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-6 form-group">
                                <label>Security</label>
                                <select class="form-control">
                                    <option value="">Select Security</option>
                                    <option value="public">Public</option>
                                    <option value="private">Private</option>
                                </select>
                            </div>
                            <div class="col-md-6 form-group">
                                <label>Recipient</label>
                                <input type="text" class="form-control" placeholder="Recipient">
                            </div>
                            <div class="col-md-12 form-group">
                                <label>Subject</label>
                                <input type="text" class="form-control" placeholder="Subject">
                            </div>
                            <div class="col-md-12 form-group">
                                <textarea class="form-control" placeholder="Message"></textarea>
                            </div>
                            <div class="col-md-6 form-group">
                                <label>Attachment</label>
                                <input type="file">
                            </div>
                            <div class="col-md-12 form-group text-right">
                                <button type="submit" class="btn btn-primary btn-space">Save</button>
                                <button type="reset" class="btn btn-default">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-expansion-panel>

        </div>

    <!-- BEGIN BLOCK: ADMIN PANEL PAGES -->
        <!-- TEAM PAGE (NEEDS SEVERE WORK) -->
        <div class="col-md-9" *ngIf="selectedPhase == 'team'">
            <div class="page-title">
                <h3>Team</h3>
            </div>

            <div class="panel panel-cutom-blue">
                <div class="panel-body">
                    <div class="overflow-div">
                        <google-chart style="margin: 0 auto;" #chart [title]="title" [type]="type"
                            [data]="userHierarchyData" [columnNames]="columnNames" [options]="option" [width]="width"
                            [height]="height">
                        </google-chart>
                    </div>
                </div>
            </div>
        </div>

        <!-- USER PAGE (NEEDS FUNCTIONALITY TIED IN TO BACKEND) -->
        <div class="col-md-9" *ngIf="selectedPhase == 'user'">
            <div class="page-title">
                User Dashboard
            </div>

            <div class="panel panel-cutom-blue">
                <div class="panel-body">
                    <div class="row col-md-12">
                        <div style="margin-bottom: 24px;">    
                            <h4 class="modal-title" id="myModalLabel">{{currentuser.role}} || <span style="color: yellow;">{{currentuser.user.first_name}} {{currentuser.user.last_name}}</span> </h4>
                        </div>
                    </div>
                    <div>
                        <h2>Project Profiles</h2>
                        <hr>
                        <div>
                            <article style="display: flex; gap: 12px; flex-grow: 1; flex-shrink: 0.75;">
                                <div style="display: flex;">
                                    <div class="parent-item-label">Parent Profiles</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                                <div style="display: flex;">
                                    <div class="parent-item-label">Total Profiles</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                                <div style="display: flex;">
                                    <div class="parent-item-label parent-item-label-alert">Total Delegated Tasks</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                            </article>
                        </div>
                        <br>
                        <div>
                            <article style="display: flex; gap: 12px; flex-grow: 1; flex-shrink: 0.75;">
                                <div style="display: flex;">
                                    <div class="parent-item-label">Launched Profiles</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                                <div style="display: flex;">
                                    <div class="parent-item-label">Reported Profiles</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                                <div style="display: flex;">
                                    <div class="parent-item-label parent-item-label-alert">Queued for Launch</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                            </article>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-cutom-blue">
                <div class="panel-body">
                    <div>
                        <h2>Organization</h2>
                        <hr>
                        <div>
                            <article style="display: flex; gap: 12px; flex-grow: 1; flex-shrink: 0.75;">
                                <div style="display: flex;">
                                    <div class="parent-item-label">Organization</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                                <div style="display: flex;">
                                    <div class="parent-item-label">Assigned Admin</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                                <div style="display: flex;">
                                    <div class="parent-item-label parent-item-label-alert">Role</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        Under Construction...
                                    </div>
                                </div>
                            </article>
                        </div>
                        <br>
                        <div>
                            <article style="display: flex; gap: 12px; flex-grow: 1; flex-shrink: 0.75;">
                                Welcome, here is the future sight for information regarding your registered organization. Displaying
                                important data such as roles, admins, production-to-expense ratios, and more...
                            </article>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-cutom-blue">
                <div class="panel-body">
                    <div>
                        <h2>Contacts</h2>
                        <hr>
                        <div>
                            <article style="display: flex; gap: 12px; flex-grow: 1; flex-shrink: 0.75;">
                                Welcome, this is the future sight of your Coaches Corner saved contacts. With the critical function of Rapifly
                                hinging on user ability to connect w/ local and global experts, there is a necessity for users to be able to save and maintain
                                a simple, organized contacts list for convenience.
                            </article>
                        </div>
                        <div>
                            <table class="display table table-data-width">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Role</th>
                                        <th>Email</th>
                                        <th>Phone #</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Jay Reyes</td>
                                        <td>Lead Developer</td>
                                        <td>Jaredreyes039@gmail.com</td>
                                        <td>+1 (520) 940-1534</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <br>
                    </div>
                </div>
            </div>

        </div>

        <!-- DETERMINES WHO GETS WHAT INFORMATION -> IT'S BECOME FAIRLY OBSOLETE, DO WE WANT TO GET RID OF IT? -->
        <div class="col-md-9" *ngIf="selectedPhase == 'security'">
            <div class="page-title">
                <h3>Security</h3>
            </div>
            <div class="panel panel-cutom-blue">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12 row pb-10">
                            <div class="col-md-6 text-blue">Plan</div>
                            <div class="col-md-6 text-white">: {{ (golaplanname) ? golaplanname : '---' }}</div>
                        </div>
                        <div class="col-md-12 row pb-10">
                            <div class="col-md-6 text-blue">Security</div>
                            <div class="col-md-6 text-white">: {{ (plansecurity) ? plansecurity : '---' }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- IS THIS BLOCK NECESSARY? TEST LATER -->
        <div class="col-md-3" *ngIf="selectedPhase === 'B' || selectedPhase === 'I'"
            [hidden]="selectedModules && selectedModules != ''"></div>
        

    <!-- BEGIN BLOCK: BRAINSTORM AND IMPROVE -->
        <!-- ACTIVE: selectedPhase:B || selectedPhase:I -->
        <!-- HIDDEN: Any module is selected (selectedModules:true) or if it isn't blank (selectedModules:'') -->
        <div class="col-md-9" *ngIf="selectedPhase === 'B' || selectedPhase === 'I'"
            [hidden]="selectedModules && selectedModules != ''">

            <!-- ACTIVE: When parent is active (parentIsActiveSelection:true) -->
            <!-- ACTIVE FORM GROUP: CHILDPLANFORM -->
            <!-- DATE IDS: 5/6 CONFLICT PRESENT W/ PARENT -->

            <div *ngIf="editChildEnabled && !parentIsActiveSelection">
                <div>
                    <div class="page-title">
                        Edit Sub-Item
                    </div>
                    <h4>Welcome to the editing portal. Here, you can efficiently edit any details under your sub-item dashboards; however,
                        names, dates, and descriptions can not be changed to maintain consistency and security across networks.
                    </h4>
                <div class="panel panel-cutom-blue">
                    <div class="panel-body">
                        <div style="padding: 10px;">
                            <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div  style="display: flex;  margin-bottom: 12px;">
                                            <div class="parent-item-label">Short Name:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.short_name}}</div>
                                        </div>
                                        <div  style="display: flex;">
                                            <div class="parent-item-label">Long Name:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.long_name}}</div>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex; margin-bottom: 12px;">
                                            <div class=" parent-item-label">Start Date:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.start_date | itemplanitemdate }}</div>
                                        </div>
                                        <div style="display: flex;">
                                            <div class=" parent-item-label">End Date:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.end_date | itemplanitemdate }}</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex; margin-bottom: 12px;">
                                            <div class=" parent-item-label parent-item-label-alert">Production Target:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.production_target }}</div>
                                        </div>
                                        <div style="display: flex;">
                                            <div class=" parent-item-label parent-item-label-alert">Expense Target:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.expense_target === "" ? 'Unspecified' : childgoalDetails.expense_target}}</div>
                                        </div>
                                    </div>
                            </div>
                            <div style="display: flex; margin-bottom: 12px;">
                                <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                    <div class=" parent-item-label-spec">Description</div>
                                    <p>{{childgoalDetails.description}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            <form #kform="ngForm" class="p-3" [formGroup]="childPlanForm" *ngIf="editChildEnabled && !parentIsActiveSelection">
                        <div>
                                <mat-expansion-panel  [expanded]="true">
                                <mat-expansion-panel-header class="page-title">
                                    <h3>Dashboard</h3>
                                </mat-expansion-panel-header>
                                <div class="panel panel-cutom-blue">
                                <div style="display: flex; flex-direction: row; margin-bottom: 12px;" class="panel-body">

                                <div style="display: flex; flex-direction: row;">
                                    <div style="display: flex; flex-direction: column;">
                                    <div style="display: flex;">
                                    <label class="parent-item-label parent-item-label-alert" for="exampleInputEmail1">Production Target</label>
                                    <input type="text" formControlName="production_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                        placeholder="Production Target"
                                        [ngClass]="{ 'is-invalid': submitted && f.production_target.errors }" autocomplete="off">
                                    <div *ngIf="submitted && f.production_target.errors" class="invalid-feedback">
                                        <div *ngIf="f.production_target.errors.required">Production target is required</div>
                                    </div>
                                    </div>
                                    </div>
                                    <div style="display: flex;  margin-left: 12px;">

                                    <label class="parent-item-label parent-item-label-alert" for="exampleInputPassword1">Expense Target</label>
                                    <input type="text" id="long_name" formControlName="expense_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                        placeholder="Expense Target"
                                        [ngClass]="{ 'is-invalid': submitted && f.expense_target.errors }" autocomplete="off">
                                    <div *ngIf="submitted && f.expense_target.errors" class="invalid-feedback">
                                        <div *ngIf="f.expense_target.errors.required">Expense target is required</div>
                                    </div>
                                    </div>
                                    <div style="display: flex;  margin-left: 12px;">
                                        <label class="parent-item-label parent-item-label-alert">Target Type</label>
                                        <select class="text-white bg-dark parent-item-val form-control form-control-spec" formControlName="production_type">
                                            <option value="">Select Type</option>
                                            <option value="dollars">Dollars</option>
                                            <option value="units">Units</option>
                                            <option value="percentage">Percentage</option>
                                        </select>
                                        <div *ngIf="IsLoginFormValid && jval.production_type.errors" class="invalid-feedback">
                                            <label *ngIf="jval.production_type.errors.required" class="error">Production type is
                                                required</label>
                                        </div>
                                    </div>   
                                </div>
                                
                                </div>
                                <div style="display: flex;">
                                <div style="display: flex; flex-direction: column; margin-right: 12px;">
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label">Production Weight</label>
                                    <input type="number"class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Production weight" formControlName="production_weight" [ngClass]="{ 'is-invalid': submitted && f.production_weight.errors }">
                                    <div *ngIf="submitted && f.production_weight.errors" class="invalid-feedback">
                                        <label *ngIf="f.production_weight.errors.required" class="error">Expense weight is required</label>
                                    </div>
                                    </div>
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label">Expense Weight</label>
                                    <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Expense weight" formControlName="expense_weight" [ngClass]="{ 'is-invalid': submitted && f.expense_weight.errors }">
                                    <div *ngIf="submitted && f.expense_weight.errors" class="invalid-feedback">
                                        <label *ngIf="f.expense_weight.errors.required" class="error">Expense weight is required</label>
                                    </div>
                                    </div>

                                </div>
                                <div style="display: flex; flex-direction: column;">
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label">Production Threshold</label>
                                    <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Personal Production Threshold" formControlName="personal_production_variance" [ngClass]="{ 'is-invalid': submitted && f.production_low_variance_alert.errors }">
                                    <div *ngIf="submitted && f.production_low_variance_alert.errors" class="invalid-feedback">
                                        <label *ngIf="f.production_low_variance_alert.errors.required" class="error">LVA is required</label>
                                    </div>
                                    </div>
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label">Expense Threshold</label>
                                    <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Personal Expense Threshold" formControlName="personal_expense_variance" [ngClass]="{ 'is-invalid': submitted && f.production_high_variance_alert.errors }">
                                    <div *ngIf="submitted && f.production_high_variance_alert.errors" class="invalid-feedback">
                                        <label *ngIf="f.production_high_variance_alert.errors.required" class="error">Hight Variance Alert is required</label>
                                    </div>
                                </div>
                                </div>
                                </div>
                                </div>
                                </mat-expansion-panel>

                                <div class="col-md-12 form-group text-right">
                                    <button type="submit " (click)="onSubmit(); toggleEditChild()"
                                        [disabled]="!checkforgoaledit && !isSharedPlanPermission"
                                        class="btn btn-primary btn-space">Save</button>
                                    <button type="reset" (click)="reset()" [disabled]="!checkforgoaledit "
                                        class="btn btn-default">Clear</button>
                                </div>
                        </div>
            </form>
            <mat-expansion-panel class="expanse-panel" *ngIf="parentIsActiveSelection" [expanded]="true">
            <mat-expansion-panel-header class="page-title">
                <h3 *ngIf="parentIsActiveSelection">
                    {{ (selectedPhase == 'I') ? 'Improve' : 'Add Sub Item' }}
                </h3>
            </mat-expansion-panel-header>
        <form #kform="ngForm" class="p-3" [formGroup]="childPlanForm" *ngIf="!editChildEnabled || parentIsActiveSelection">
                <div class="panel panel-cutom-blue">
                    <div class="panel-body">
                        <div style="padding: 10px;">
                            <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">

                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label" for="exampleInputEmail1">Short Name<span>*</span></label>
                                    <input type="text" formControlName="short_name" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                        placeholder="Short name"
                                        [ngClass]="{ 'is-invalid': submitted && f.short_name.errors }" autocomplete="off">
                                    <div *ngIf="submitted && f.short_name.errors" class="invalid-feedback">
                                        <div *ngIf="f.short_name.errors.required">Short name is required</div>
                                    </div>
                                    </div>

                                    <div style="display: flex;  margin-bottom: 12px;">

                                    <label class="parent-item-label" for="exampleInputPassword1">Long Name<span>*</span></label>
                                    <input type="text" id="long_name" formControlName="long_name" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                        placeholder="Long name"
                                        [ngClass]="{ 'is-invalid': submitted && f.long_name.errors }" autocomplete="off">
                                    <div *ngIf="submitted && f.long_name.errors" class="invalid-feedback">
                                        <div *ngIf="f.long_name.errors.required">Long name is required</div>
                                    </div>
                                    </div>
                                </div>
                            
                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div style="display: flex;  margin-bottom: 12px;">

                                    <label class="parent-item-label" for="exampleInputPassword1">Start Date<span>*</span></label>
                                    <div class="input-group input-append bootstrap-datepicker">
                                        <input type="text" id="date-input5" formControlName="start_date"
                                        class="text-white bg-dark parent-item-val form-control form-control-spec bg-dark date-picker" placeholder="Start Date" autocomplete="off">
                                        <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                class="fa fa-calendar"></i></span>
                                    </div>
                                    </div>
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label" for="exampleInputPassword1">End Date<span>*</span></label>
                                    <div class="bg-dark input-group input-append bootstrap-datepicker">
                                        <input type="text" id="date-input6" formControlName="end_date"
                                        class="text-white bg-dark parent-item-val form-control form-control-spec date-picker" placeholder="End Date" autocomplete="off">
                                        <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                class="fa fa-calendar"></i></span>
                                    </div>
                                    </div>
                                </div>
                            </div>
                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div style="display: flex;  margin-bottom: 12px;">
                                        <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                        <div class=" parent-item-label-spec">Description</div>
                                        <textarea type="text" formControlName="description" class="form-control bg-dark"
                                        placeholder="Click to edit description" style="border-radius: 0px; border: none; border-left: 2px solid #fff; padding-left: 12px;"></textarea>
                                        <div *ngIf="submitted && f.description.errors" class="invalid-feedback">
                                            <div *ngIf="f.description.errors.required">Description is required</div>
                                        </div>                                    
                                    </div>
                                    </div>
                                </div>

                                <mat-expansion-panel  [expanded]="true">
                                <mat-expansion-panel-header class="page-title" style="margin-bottom: 24px;" >
                                    <h3>Dashboard</h3>
                                </mat-expansion-panel-header>
                                <div style="display: flex; flex-direction: row; margin-bottom: 12px;">

                                <div style="display: flex; flex-direction: row;">
                                    <div style="display: flex; flex-direction: column;">
                                    <div style="display: flex;">
                                    <label class="parent-item-label parent-item-label-alert" for="exampleInputEmail1">Production Target</label>
                                    <input type="text" formControlName="production_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                        placeholder="Production Target"
                                        [ngClass]="{ 'is-invalid': submitted && f.production_target.errors }" autocomplete="off">
                                    <div *ngIf="submitted && f.production_target.errors" class="invalid-feedback">
                                        <div *ngIf="f.production_target.errors.required">Production target is required</div>
                                    </div>
                                    </div>
                                    </div>
                                    <div style="display: flex;  margin-left: 12px;">

                                    <label class="parent-item-label parent-item-label-alert" for="exampleInputPassword1">Expense Target</label>
                                    <input type="text" id="long_name" formControlName="expense_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                        placeholder="Expense Target"
                                        [ngClass]="{ 'is-invalid': submitted && f.expense_target.errors }" autocomplete="off">
                                    <div *ngIf="submitted && f.expense_target.errors" class="invalid-feedback">
                                        <div *ngIf="f.expense_target.errors.required">Expense target is required</div>
                                    </div>
                                    </div>
                                    <div style="display: flex;  margin-left: 12px;">
                                        <label class="parent-item-label parent-item-label-alert">Target Type</label>
                                        <select class="text-white bg-dark parent-item-val form-control form-control-spec" formControlName="production_type">
                                            <option value="">Select Type</option>
                                            <option value="dollars">Dollars</option>
                                            <option value="units">Units</option>
                                            <option value="percentage">Percentage</option>
                                        </select>
                                        <div *ngIf="IsLoginFormValid && jval.production_type.errors" class="invalid-feedback">
                                            <label *ngIf="jval.production_type.errors.required" class="error">Production type is
                                                required</label>
                                        </div>
                                    </div>   
                                </div>
                                
                                </div>
                                <div style="display: flex;">
                                <div style="display: flex; flex-direction: column; margin-right: 12px;">
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label">Production Weight</label>
                                    <input type="number"class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Production weight" formControlName="production_weight">
                                    </div>
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label">Expense Weight</label>
                                    <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Expense weight" formControlName="expense_weight">
                                    </div>

                                </div>
                                <div style="display: flex; flex-direction: column;">
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label">Production Threshold</label>
                                    <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Personal Production Threshold" formControlName="personal_production_variance">
                                    </div>
                                    <div style="display: flex;  margin-bottom: 12px;">
                                    <label class="parent-item-label">Expense Threshold</label>
                                    <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Personal Expense Threshold" formControlName="personal_expense_variance">
                                </div>
                                </div>
                            </div>
                                </mat-expansion-panel>

                                <div class="col-md-12 form-group text-right">
                                    <button type="submit " (click)="onSubmit(); toggleEditChild()"
                                        [disabled]="!checkforgoaledit && !isSharedPlanPermission"
                                        class="btn btn-primary btn-space">Save</button>
                                    <button type="reset" (click)="reset()" [disabled]="!checkforgoaledit "
                                        class="btn btn-default">Clear</button>
                                </div>


                                <mat-expansion-panel *ngIf="!parentIsActiveSelection" [hidden]="parentIsActiveSelection" class="expanse-panel expanse-panel-discussion">
                                    <mat-expansion-panel-header class="page-title">
                                        <h3>Communication</h3>
                                    </mat-expansion-panel-header>
                                    <div class="panel panel-cutom-blue" style="border: none; box-shadow: none;">
                                        <div class="panel-body">
                                            <form [formGroup]="DiscussionForm">
                                                <div class="row">
                                                    <div class="col-md-6 form-group">
                                                        <label>Security</label>
                                                        <select class="form-control" formControlName="security">
                                                            <option value="">Select Security</option>
                                                            <option value="public">Public</option>
                                                            <option value="private">Private</option>
                                                        </select>
                                                        <div *ngIf="isSubmittedDiscussionForm && dscf.security.errors" class="invalid-feedback">
                                                            <label *ngIf="dscf.security.errors.required" class="error">Security is
                                                                required</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 form-group">
                                                        <label>Recipients</label>
                                                        <select class="form-control" formControlName="recipient_id" id="recipient_id" (change)="onRecipient($event)">
                                                            <option value="">Select Recipient</option>
                                                            <option *ngFor="let hu of users;" value="{{hu.user_id._id}}">
                                                                {{ hu.user_id.first_name }} {{ hu.user_id.last_name }}
                                                                ({{hu.hierarchy_id.designation}})</option>
                                                            <option value="invite">Invite New Recipient</option>
                                                        </select>
                                                        <div *ngIf="isSubmittedDiscussionForm && dscf.recipient_id.errors"
                                                            class="invalid-feedback">
                                                            <label *ngIf="dscf.recipient_id.errors.required" class="error">Recipient is
                                                                required</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 form-group">
                                                        <label>Subject</label>
                                                        <input type="text" class="form-control" placeholder="Subject" formControlName="subject"
                                                            [ngClass]="{ 'is-invalid': isSubmittedDiscussionForm && dscf.subject.errors }">
                                                        <div *ngIf="isSubmittedDiscussionForm && dscf.subject.errors" class="invalid-feedback">
                                                            <label *ngIf="dscf.subject.errors.required" class="error">Subject is
                                                                required</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12 form-group">
                                                        <label>Message</label>
                                                        <textarea class="form-control" placeholder="Message" formControlName="message"
                                                            [ngClass]="{ 'is-invalid': isSubmittedDiscussionForm && dscf.message.errors }"></textarea>
                                                        <div *ngIf="isSubmittedDiscussionForm && dscf.message.errors" class="invalid-feedback">
                                                            <label *ngIf="dscf.message.errors.required" class="error">Message is
                                                                required</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 form-group">
                                                        <label>Attachment</label>
                                                        <input type="file" (change)="uploadDiscussionAttachment($event.target.files)">
                                                    </div>
                                                    <div class="col-md-12 form-group text-right">
                                                        <button type="submit" class="btn btn-primary btn-space"
                                                            (click)="onSubmitDiscussion()">Save</button>
                                                        <button type="reset" class="btn btn-default"
                                                            (click)="resetDiscussionForm()">Cancel</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </mat-expansion-panel>
                        </div>
                    </div>
                </div>
            </form>

            <div *ngIf="!editChildEnabled && !parentIsActiveSelection" class="panel panel-cutom-blue">
                <div class="panel-body">
                    <div style="padding: 10px;">
                        <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div  style="display: flex;  margin-bottom: 12px;">
                                        <div class="parent-item-label">Short Name:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{childgoalDetails.short_name}}</div>
                                    </div>
                                    <div  style="display: flex;">
                                        <div class="parent-item-label">Long Name:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{childgoalDetails.long_name}}</div>
                                    </div>
                                </div>
                                
                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div style="display: flex; margin-bottom: 12px;">
                                        <div class=" parent-item-label">Start Date:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{childgoalDetails.start_date | itemplanitemdate }}</div>
                                    </div>
                                    <div style="display: flex;">
                                        <div class=" parent-item-label">End Date:</div>
                                        <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                            {{childgoalDetails.end_date | itemplanitemdate }}</div>
                                    </div>
                                </div>
                        </div>
                        <div style="display: flex;  margin-bottom: 12px;">
                            <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                <div class=" parent-item-label-spec">Description</div>
                                <div class="">{{childgoalDetails.description}}</div>
                            </div>
                        </div>
                    </div>

                    <mat-expansion-panel  [expanded]="true">
                        <mat-expansion-panel-header class="page-title" style="margin-bottom: 24px;" >
                            <h3>Dashboard</h3>
                        </mat-expansion-panel-header>
                        <div style="display: flex; flex-direction: row;">
                            <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                <div  style="display: flex;  margin-bottom: 12px;">
                                    <div class="parent-item-label parent-item-label-alert">Production Target:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.production_target === 'null' ? "Edit plan to add target" : childgoalDetails.production_target}}</div>
                                </div>
                                <div  style="display: flex; margin-bottom: 12px;">
                                    <div class="parent-item-label">Production Weight:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.production_weight === 'null' ? "Edit plan to add weight" : childgoalDetails.production_weight}}</div>
                                </div>
                                <div  style="display: flex;">
                                    <div class="parent-item-label">Expense Weight:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.expense_weight === 'null' ? "Edit plan to add weight" : childgoalDetails.expense_weight}}</div>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                <div  style="display: flex;  margin-bottom: 12px;">
                                    <div class="parent-item-label parent-item-label-alert">Expense Target:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.expense_target === 'null' ? "Edit plan to add target" : childgoalDetails.expense_target}}</div>
                                </div>
                                <div  style="display: flex; margin-bottom: 12px;">
                                    <div class="parent-item-label">Production Threshold:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.personal_production_variance === 'null' ? "Edit plan to add production threshold" : childgoalDetails.personal_production_variance}}</div>
                                </div>
                                <div  style="display: flex;">
                                    <div class="parent-item-label">Expense Threshold</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.personal_expense_variance === 'null' ? "Edit plan to add expense threshold" : childgoalDetails.personal_expense_variance}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 form-group text-right">
                            <button (click)="toggleEditChild()"
                                class="btn btn-primary btn-space">Edit</button>
                        </div>
                    </mat-expansion-panel>

                    <mat-expansion-panel *ngIf="!parentIsActiveSelection" [hidden]="parentIsActiveSelection" class="expanse-panel expanse-panel-discussion">
                        <mat-expansion-panel-header class="page-title">
                            <h3>Communication</h3>
                        </mat-expansion-panel-header>
                        <div class="panel panel-cutom-blue" style="border: none; box-shadow: none;">
                            <div class="panel-body">
                                <form [formGroup]="DiscussionForm">
                                    <div class="row">
                                        <div class="col-md-6 form-group">
                                            <label>Security</label>
                                            <select class="form-control" formControlName="security">
                                                <option value="">Select Security</option>
                                                <option value="public">Public</option>
                                                <option value="private">Private</option>
                                            </select>
                                            <div *ngIf="isSubmittedDiscussionForm && dscf.security.errors" class="invalid-feedback">
                                                <label *ngIf="dscf.security.errors.required" class="error">Security is
                                                    required</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label>Recipients</label>
                                            <select class="form-control" formControlName="recipient_id" id="recipient_id" (change)="onRecipient($event)">
                                                <option value="">Select Recipient</option>
                                                <option *ngFor="let hu of users;" value="{{hu.user_id._id}}">
                                                    {{ hu.user_id.first_name }} {{ hu.user_id.last_name }}
                                                    ({{hu.hierarchy_id.designation}})</option>
                                                <option value="invite">Invite New Recipient</option>
                                            </select>
                                            <div *ngIf="isSubmittedDiscussionForm && dscf.recipient_id.errors"
                                                class="invalid-feedback">
                                                <label *ngIf="dscf.recipient_id.errors.required" class="error">Recipient is
                                                    required</label>
                                            </div>
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <label>Subject</label>
                                            <input type="text" class="form-control" placeholder="Subject" formControlName="subject"
                                                [ngClass]="{ 'is-invalid': isSubmittedDiscussionForm && dscf.subject.errors }">
                                            <div *ngIf="isSubmittedDiscussionForm && dscf.subject.errors" class="invalid-feedback">
                                                <label *ngIf="dscf.subject.errors.required" class="error">Subject is
                                                    required</label>
                                            </div>
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <label>Message</label>
                                            <textarea class="form-control" placeholder="Message" formControlName="message"
                                                [ngClass]="{ 'is-invalid': isSubmittedDiscussionForm && dscf.message.errors }"></textarea>
                                            <div *ngIf="isSubmittedDiscussionForm && dscf.message.errors" class="invalid-feedback">
                                                <label *ngIf="dscf.message.errors.required" class="error">Message is
                                                    required</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label>Attachment</label>
                                            <input type="file" (change)="uploadDiscussionAttachment($event.target.files)">
                                        </div>
                                        <div class="col-md-12 form-group text-right">
                                            <button type="submit" class="btn btn-primary btn-space"
                                                (click)="onSubmitDiscussion()">Save</button>
                                            <button type="reset" class="btn btn-default"
                                                (click)="resetDiscussionForm()">Cancel</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </div>
            </div>

            </mat-expansion-panel>


            <!-- WHEN A SUB ITEM IS SELECTED -->
            <!-- ACTUIVE: When a parent isn't selected -->
            <div class="expanse-panel" *ngIf="!parentIsActiveSelection && !editChildEnabled">
            <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: center;">
                <h3 class="page-title"  *ngIf="!parentIsActiveSelection">
                    {{ (selectedPhase == 'I') ? 'Improve' : 'Project Profile' }}
                </h3>
                <button *ngIf="!parentIsActiveSelection" class="btn btn-primary" (click)="childgoalDetails.parent_goal_id == '#' ? visitParentForm(childgoalDetails.plan_id) : getgoaldetail(childgoalDetails.parent_goal_id, '')">
                    Go To Parent
                </button>
            </div>

            <!-- DISPLAYS SELECTED SUB ITEM -->
            <div>
                <div class="panel panel-cutom-blue">
                    <div class="panel-body">
                        <div style="padding: 10px;">
                            <div class="text-right" style="margin-bottom: 24px;">
                                <button routerLink="/item-plans/{{ goalplanid }}" class="btn btn-warning"><i
                                        class="fa fa-comments"></i></button>
                            </div>
                            <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div  style="display: flex;  margin-bottom: 12px;">
                                            <div class="parent-item-label">Short Name:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.short_name}}</div>
                                        </div>
                                        <div  style="display: flex;">
                                            <div class="parent-item-label">Long Name:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.long_name}}</div>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex; margin-bottom: 12px;">
                                            <div class=" parent-item-label">Start Date:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.start_date | itemplanitemdate }}</div>
                                        </div>
                                        <div style="display: flex;">
                                            <div class=" parent-item-label">End Date:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.end_date | itemplanitemdate }}</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex; margin-bottom: 12px;">
                                            <div class=" parent-item-label parent-item-label-alert">Production Target:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.production_target }}</div>
                                        </div>
                                        <div style="display: flex;">
                                            <div class=" parent-item-label parent-item-label-alert">Expense Target:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{childgoalDetails.expense_target === "" ? 'Unspecified' : childgoalDetails.expense_target}}</div>
                                        </div>
                                    </div>
                            </div>
                            <div style="display: flex; margin-bottom: 12px;">
                                <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                    <div class=" parent-item-label-spec">Description</div>
                                    <p>{{childgoalDetails.description}}</p>
                                </div>
                            </div>
                            <hr>
                                                <mat-expansion-panel  [expanded]="true">
                        <mat-expansion-panel-header class="page-title" style="margin-bottom: 24px;" >
                            <h3>Dashboard</h3>
                        </mat-expansion-panel-header>
                        <div style="display: flex; flex-direction: row;">
                            <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                <div  style="display: flex;  margin-bottom: 12px;">
                                    <div class="parent-item-label parent-item-label-alert">Production Target:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.production_target === 'null' ? "Edit plan to add target" : childgoalDetails.production_target}}</div>
                                </div>
                                <div  style="display: flex; margin-bottom: 12px;">
                                    <div class="parent-item-label">Production Weight:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.production_weight === 'null' ? "Edit plan to add weight" : childgoalDetails.production_weight}}</div>
                                </div>
                                <div  style="display: flex;">
                                    <div class="parent-item-label">Expense Weight:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.expense_weight === 'null' ? "Edit plan to add weight" : childgoalDetails.expense_weight}}</div>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                <div  style="display: flex;  margin-bottom: 12px;">
                                    <div class="parent-item-label parent-item-label-alert">Expense Target:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.expense_target === 'null' ? "Edit plan to add target" : childgoalDetails.expense_target}}</div>
                                </div>
                                <div  style="display: flex; margin-bottom: 12px;">
                                    <div class="parent-item-label">Production Threshold:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.personal_production_variance === 'null' ? "Edit plan to add production threshold" : childgoalDetails.personal_production_variance}}</div>
                                </div>
                                <div  style="display: flex;">
                                    <div class="parent-item-label">Expense Threshold:</div>
                                    <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                        {{childgoalDetails.personal_expense_variance === 'null' ? "Edit plan to add expense threshold" : childgoalDetails.personal_expense_variance}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 form-group text-right">
                            <button (click)="toggleEditChild()"
                                class="btn btn-primary btn-space">Edit</button>
                        </div>
                    </mat-expansion-panel>
                        </div>
                    </div>
                    <mat-expansion-panel>
                        <mat-expansion-panel-header class="page-title">
                            <h3>Additional Fields</h3>
                        </mat-expansion-panel-header>
                    <div  *ngFor="let parentplan of parentplanDetails[0] | keyvalue " style="padding-top: 12px;">
                        <div style="display: flex; flex-direction: column;"
                            *ngIf="parentplan.key !='_id' && parentplan.key !='shared_permission_users' && parentplan.key !='share_users' && parentplan.key !='shared_plan_users' && parentplan.key !='user_group_id' && parentplan.key !='number' && parentplan.key !='motivation' && parentplan.value && parentplan.value !== ''" [hidden]="parentplan.value==''">
                            <div style="display: flex; flex-direction: row; margin-bottom: 12px;"
                                *ngIf="parentplan.value != '' && parentplan.key !='start_date' && parentplan.key !='end_date' && parentplan.key !='user_id' && parentplan.key !='security' && parentplan.key != 'short_name' && parentplan.key != 'long_name' && parentplan.key != 'production_target' && parentplan.key != 'expense_target' && parentplan.key != 'production_type'
                                && parentplan.key != 'description' && parentplan.key != 'numbers'">
                                <div class="parent-item-label">{{textDecoration(parentplan.key)}}:</div>
                                <div class="text-white bg-dark parent-item-val" style="width: 100%; max-width: unset; display: flex; align-items: center;" *ngIf="parentplan.key !='userid' ">
                                    {{parentplan.value}}</div>
                            </div>
                            
                        </div>
                    </div>
                </mat-expansion-panel>
                </div>
            </div>

        </div>

            <!-- ACTIVE FORM GROUP: CHILDPLANFROMSUB -->
            <!-- DATE IDS: 5/6 CONFLICT PRESENT W/ CHILD 1 AND PARENT -->
            <mat-expansion-panel [expanded]="true" class="expanse-panel" *ngIf="!parentIsActiveSelection && !editChildEnabled" [hidden]="parentIsActiveSelection || editChildEnabled">
                <mat-expansion-panel-header class="page-title">
                    <h3 *ngIf="!parentIsActiveSelection">
                        {{ (selectedPhase == 'I') ? 'Improve' : 'Add Sub Item' }}
                    </h3>
                </mat-expansion-panel-header>
                <form #kform="ngForm" class="p-3" [formGroup]="childPlanFormSub" *ngIf="!editChildEnabled || !parentIsActiveSelection">
                    <div class="panel panel-cutom-blue">
                        <div class="panel-body">
                            <div style="padding: 10px;">
                                <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
    
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label" for="exampleInputEmail1">Short Name<span>*</span></label>
                                        <input type="text" formControlName="short_name" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Short name"
                                            [ngClass]="{ 'is-invalid': submitted && f.short_name.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.short_name.errors" class="invalid-feedback">
                                            <div *ngIf="f.short_name.errors.required">Short name is required</div>
                                        </div>
                                        </div>
    
                                        <div style="display: flex;  margin-bottom: 12px;">
    
                                        <label class="parent-item-label" for="exampleInputPassword1">Long Name<span>*</span></label>
                                        <input type="text" id="long_name" formControlName="long_name" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Long name"
                                            [ngClass]="{ 'is-invalid': submitted && f.long_name.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.long_name.errors" class="invalid-feedback">
                                            <div *ngIf="f.long_name.errors.required">Long name is required</div>
                                        </div>
                                        </div>
                                    </div>

                                
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
    
                                        <label class="parent-item-label" for="exampleInputPassword1">Start Date<span>*</span></label>
                                        <div class="input-group input-append bootstrap-datepicker">
                                            <input type="text" id="date-input5" formControlName="start_date"
                                            class="text-white bg-dark parent-item-val form-control form-control-spec bg-dark date-picker" placeholder="Start Date" autocomplete="off">
                                            <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                    class="fa fa-calendar"></i></span>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label" for="exampleInputPassword1">End Date<span>*</span></label>
                                        <div class="bg-dark input-group input-append bootstrap-datepicker">
                                            <input type="text" id="date-input6" formControlName="end_date"
                                            class="text-white bg-dark parent-item-val form-control form-control-spec date-picker" placeholder="End Date" autocomplete="off">
                                            <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                    class="fa fa-calendar"></i></span>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
    
                                            <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                            <div class=" parent-item-label-spec">Description</div>
                                            <textarea type="text" formControlName="description" class="form-control bg-dark"
                                            placeholder="Click to edit description" style="border-radius: 0px; border: none; border-left: 2px solid #fff; padding-left: 12px;"></textarea>
                                            <div *ngIf="submitted && f.description.errors" class="invalid-feedback">
                                                <div *ngIf="f.description.errors.required">Description is required</div>
                                            </div>                                    
                                        </div>
                                        </div>
                                    </div>
    
                                    <mat-expansion-panel  [expanded]="false">
                                    <mat-expansion-panel-header class="page-title" style="margin-bottom: 24px;" >
                                        <h3>Dashboard</h3>
                                    </mat-expansion-panel-header>
                                    <div style="display: flex; flex-direction: row; margin-bottom: 12px;">
    
                                    <div style="display: flex; flex-direction: row;">
                                        <div style="display: flex; flex-direction: column;">
                                        <div style="display: flex;">
                                        <label class="parent-item-label parent-item-label-alert" for="exampleInputEmail1">Production Target</label>
                                        <input type="text" formControlName="production_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Production Target"
                                            [ngClass]="{ 'is-invalid': submitted && f.production_target.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.production_target.errors" class="invalid-feedback">
                                            <div *ngIf="f.production_target.errors.required">Production target is required</div>
                                        </div>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-left: 12px;">
    
                                        <label class="parent-item-label parent-item-label-alert" for="exampleInputPassword1">Expense Target</label>
                                        <input type="text" id="long_name" formControlName="expense_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Expense Target"
                                            [ngClass]="{ 'is-invalid': submitted && f.expense_target.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.expense_target.errors" class="invalid-feedback">
                                            <div *ngIf="f.expense_target.errors.required">Expense target is required</div>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-left: 12px;">
                                            <label class="parent-item-label parent-item-label-alert">Target Type</label>
                                            <select class="text-white bg-dark parent-item-val form-control form-control-spec" formControlName="production_type">
                                                <option value="">Select Type</option>
                                                <option value="dollars">Dollars</option>
                                                <option value="units">Units</option>
                                                <option value="percentage">Percentage</option>
                                            </select>
                                            <div *ngIf="IsLoginFormValid && jval.production_type.errors" class="invalid-feedback">
                                                <label *ngIf="jval.production_type.errors.required" class="error">Production type is
                                                    required</label>
                                            </div>
                                        </div>   
                                    </div>
                                    
                                    </div>
                                    <div style="display: flex;">
                                    <div style="display: flex; flex-direction: column; margin-right: 12px;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Production Weight</label>
                                        <input type="number"class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Production weight" formControlName="production_weight">
                                        <div *ngIf="submitted && f.production_weight.errors" class="invalid-feedback">
                                            <label *ngIf="f.production_weight.errors.required" class="error">Expense weight is required</label>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Expense Weight</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Expense weight" formControlName="expense_weight">

                                        </div>
    
                                    </div>
                                    <div style="display: flex; flex-direction: column;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Production Threshold</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Low Variance Alert" formControlName="personal_production_variance" >
                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Expense Threshold</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Hight Variance Alert" formControlName="personal_expense_variance" >
                                    </div>
                                    </div>
                                </div>
                                    </mat-expansion-panel>
    
                                    <div class="col-md-12 form-group text-right">
                                        <button type="submit " (click)="onSubmitSub()"
                                            [disabled]="!checkforgoaledit && !isSharedPlanPermission"
                                            class="btn btn-primary btn-space">Save</button>
                                        <button type="reset" (click)="reset()" [disabled]="!checkforgoaledit "
                                            class="btn btn-default">Clear</button>
                                    </div>


                            </div>
                        </div>
                    </div>
                </form>
            </mat-expansion-panel>
        
        
            <!-- DISPLAYS DETAILS OF THE PARENT ITEM/ROOT ITEM -->


            <!-- VIEWS VARIOUS LISTS (GOAL, STRATEGY, ETC.) -->
            <!-- ACTIVE: If planGoals has a value (planGoals:true) and we're under Brainstorm -->
            <mat-expansion-panel class="expanse-panel" *ngIf="selectedPhase == 'B' && planGoals" >
                <mat-expansion-panel-header class="page-title">
                    <h3>View {{ textDecoration(moduleType) }} List</h3>
                </mat-expansion-panel-header>
    
                <!-- DATA TBL ID: table-goals -->
                <div class="panel panel-cutom-blue" *ngIf="selectedPhase == 'B' && planGoals">
                    <div class="row">
                        <table id="table-goals" datatable [dtOptions]="dtOptionsPlanGoals"
                            class="display table table-data-width">
                            <thead>
                                <tr>
                                    <th class="prioritize-blue">(G) Short Name</th>
                                    <th class="prioritize-blue">Start Date</th>
                                    <th class="prioritize-blue">End Date</th>
                                    <th class="prioritize-blue">Production Target</th>
                                    <th class="prioritize-blue">Production Threshold</th>
                                    <th class="prioritize-blue">Expense Target</th>
                                    <th class="prioritize-blue">Expense Threshold</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let p of planGoals; let i=index">
                                    <td>(G) {{ p.short_name }}</td>
                                    <td>{{ p.start_date | prioritizegoaldate }}</td>
                                    <td>{{ p.end_date | prioritizegoaldate}}</td>
                                    <td>{{ (p.production_target) ? p.production_target : 0 }}</td>
                                    <td>{{ (p.personal_production_variance) ? p.personal_production_variance : 0 }}</td>
                                    <td>{{ (p.expense_target) ? p.expense_target : 0 }}</td>
                                    <td>{{ (p.personal_expense_variance) ? p.personal_expense_variance : 0 }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </mat-expansion-panel>
        </div>

        <!-- MODULE VIEW -->
        <div class="col-md-9" *ngIf="selectedPhase === 'B' || selectedPhase === 'I'
        || selectedModules !== 'strategy' || selectedModules !== 'task'
            || selectedModules !== 'motive' || selectedModules !== 'analysis'
            || selectedModules !== 'intelligence'"
        [hidden]="!selectedModules && selectedModules == '' || parentIsActiveSelection
            || selectedModules === 'strategy' || selectedModules === 'task'
            || selectedModules === 'motive' || selectedModules === 'analysis'
            || selectedModules === 'intelligence'
        ">

            <!-- ACTIVE FORM GROUP: CHILDPLANFORM CONFLICT PRESENT -->
            <!-- DATE IDS: 5/6 -->
            <!-- Does this need the expanse panel class? -->
            <div class="expanse-panel">
                <div class="">
                    <div class="page-title" [hidden]="selectedModules == 'opportunity' || selectedModules == 'problem'">
                        {{ (selectedPhase == 'I') ? 'Improve' : textDecoration(selectedModules) }}
                    </div>
                </div>
                <form #kform="ngForm" class="p-3" [formGroup]="childPlanForm" [hidden]="selectedModules == 'opportunity' || selectedModules == 'problem'">
                    <div class="panel panel-cutom-blue">
                        <div class="panel-body">
                            <div style="padding: 10px;">
                                <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">

                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label" for="exampleInputEmail1">Short Name<span>*</span></label>
                                        <input type="text" formControlName="short_name" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Short name"
                                            [ngClass]="{ 'is-invalid': submitted && f.short_name.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.short_name.errors" class="invalid-feedback">
                                            <div *ngIf="f.short_name.errors.required">Short name is required</div>
                                        </div>
                                        </div>

                                        <div style="display: flex;  margin-bottom: 12px;">

                                        <label class="parent-item-label" for="exampleInputPassword1">Long Name<span>*</span></label>
                                        <input type="text" id="long_name" formControlName="long_name" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Long name"
                                            [ngClass]="{ 'is-invalid': submitted && f.long_name.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.long_name.errors" class="invalid-feedback">
                                            <div *ngIf="f.long_name.errors.required">Long name is required</div>
                                        </div>
                                        </div>
                                    </div>
                                
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">

                                        <label class="parent-item-label" for="exampleInputPassword1">Start Date<span>*</span></label>
                                        <div class="input-group input-append bootstrap-datepicker">
                                            <input type="text" id="date-input5" formControlName="start_date"
                                            class="text-white bg-dark parent-item-val form-control form-control-spec bg-dark date-picker" placeholder="Start Date" autocomplete="off">
                                            <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                    class="fa fa-calendar"></i></span>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label" for="exampleInputPassword1">End Date<span>*</span></label>
                                        <div class="bg-dark input-group input-append bootstrap-datepicker">
                                            <input type="text" id="date-input6" formControlName="end_date"
                                            class="text-white bg-dark parent-item-val form-control form-control-spec date-picker" placeholder="End Date" autocomplete="off">
                                            <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                    class="fa fa-calendar"></i></span>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <!-- <div style="display: flex;  margin-bottom: 12px;">

                                        <label class="parent-item-label">Select Users</label>
                                        <ng-select [items]="items" bindLabel="name" placeholder="Select Users"
                                            formControlName="shared_users" appendTo="body" multiple="true"
                                            [(ngModel)]="selected" (change)="onChange($event)">
                                        </ng-select>
                                        </div> -->
                                        <div style="display: flex;  margin-bottom: 12px;">

                                            <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                            <div class=" parent-item-label-spec">Description</div>
                                            <textarea type="text" formControlName="description" class="form-control bg-dark"
                                            placeholder="Click to edit description" style="border-radius: 0px; border: none; border-left: 2px solid #fff; padding-left: 12px;"></textarea>
                                            <div *ngIf="submitted && f.description.errors" class="invalid-feedback">
                                                <div *ngIf="f.description.errors.required">Description is required</div>
                                            </div>                                    
                                        </div>
                                        </div>
                                    </div>

                                    <mat-expansion-panel [expanded]="false">
                                    <mat-expansion-panel-header class="page-title" style="margin-bottom: 24px;" >
                                        <h3>Dashboard</h3>
                                    </mat-expansion-panel-header>
                                    <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
                                    <!-- <div class="col-md-3 form-group">
                                        <label>Production Target</label>
                                        <input type="number" class="form-control" placeholder="Production Target" formControlName="production_target" [ngClass]="{ 'is-invalid': submitted && f.production_target.errors }">
                                        <div *ngIf="submitted && f.production_target.errors" class="invalid-feedback">
                                            <label *ngIf="f.production_target.errors.required" class="error">Production target is required</label>
                                        </div>
                                    </div> -->
                                    <!-- <div class="col-md-3 form-group">
                                        <label>Type</label>
                                        <select class="form-control" formControlName="production_type">
                                            <option value="">Select Type</option>
                                            <option value="units">Units</option>
                                        </select>
                                        <div *ngIf="submitted && f.production_type.errors" class="invalid-feedback">
                                            <label *ngIf="f.production_type.errors.required" class="error">Production type is required</label>
                                        </div>
                                    </div> -->
                                    <!-- <div class="col-md-6 form-group">
                                        <label>Expense Target</label>
                                        <input type="number" class="form-control" placeholder="Expense Target" formControlName="expense_target" [ngClass]="{ 'is-invalid': submitted && f.expense_target.errors }">
                                        <div *ngIf="submitted && f.expense_target.errors" class="invalid-feedback">
                                            <label *ngIf="f.expense_target.errors.required" class="error">Expense target is required</label>
                                        </div>
                                    </div> -->
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label parent-item-label-alert" for="exampleInputEmail1">Production Target</label>
                                        <input type="text" formControlName="production_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Short name"
                                            [ngClass]="{ 'is-invalid': submitted && f.production_target.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.production_target.errors" class="invalid-feedback">
                                            <div *ngIf="f.production_target.errors.required">Production target is required</div>
                                        </div>
                                        </div>

                                        <div style="display: flex;  margin-bottom: 12px;">

                                        <label class="parent-item-label parent-item-label-alert" for="exampleInputPassword1">Expense Target</label>
                                        <input type="text" id="long_name" formControlName="expense_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Long name"
                                            [ngClass]="{ 'is-invalid': submitted && f.expense_target.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.expense_target.errors" class="invalid-feedback">
                                            <div *ngIf="f.expense_target.errors.required">Expense target is required</div>
                                        </div>
                                        </div>

                                        <div style="display: flex;  margin-bottom: 12px;">
                                            <label class="parent-item-label parent-item-label-alert">Target Type</label>
                                            <select class="text-white bg-dark parent-item-val form-control form-control-spec" formControlName="production_type">
                                                <option value="">Select Type</option>
                                                <option value="dollars">Dollars</option>
                                                <option value="units">Units</option>
                                                <option value="percentage">Percentage</option>
                                            </select>

                                        </div>   
                                    </div>

                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Production Threshold</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Personal production threshold" formControlName="personal_production_variance">

                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Expense Threshold</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Personal Expense Threshold" formControlName="personal_expense_variance">

                                    </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Production Weight</label>
                                        <input type="number"class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Production weight" formControlName="production_weight" [ngClass]="{ 'is-invalid': submitted && f.production_weight.errors }">
                                        <div *ngIf="submitted && f.production_weight.errors" class="invalid-feedback">
                                            <label *ngIf="f.production_weight.errors.required" class="error">Expense weight is required</label>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Expense Weight</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Expense weight" formControlName="expense_weight" [ngClass]="{ 'is-invalid': submitted && f.expense_weight.errors }">
                                        <div *ngIf="submitted && f.expense_weight.errors" class="invalid-feedback">
                                            <label *ngIf="f.expense_weight.errors.required" class="error">Expense weight is required</label>
                                        </div>
                                        </div>

                                    </div>
                                    </div>
                                    </mat-expansion-panel>

                                    <div class="col-md-12 form-group text-right">
                                        <button type="submit " (click)="onSubmit()"
                                            [disabled]="!checkforgoaledit && !isSharedPlanPermission"
                                            class="btn btn-primary btn-space">Save</button>
                                        <button type="reset" (click)="reset()" [disabled]="!checkforgoaledit "
                                            class="btn btn-default">Clear</button>
                                    </div>

                                    <mat-expansion-panel class="expanse-panel expanse-panel-discussion">
                                        <mat-expansion-panel-header class="page-title">
                                            <h3>Communication</h3>
                                        </mat-expansion-panel-header>
                                        <div class="panel panel-cutom-blue" style="border: none; box-shadow: none;">
                                            <div class="panel-body">
                                                <form [formGroup]="DiscussionForm">
                                                    <div class="row">
                                                        <div class="col-md-6 form-group">
                                                            <label>Security</label>
                                                            <select class="form-control" formControlName="security">
                                                                <option value="">Select Security</option>
                                                                <option value="public">Public</option>
                                                                <option value="private">Private</option>
                                                            </select>
                                                            <div *ngIf="isSubmittedDiscussionForm && dscf.security.errors" class="invalid-feedback">
                                                                <label *ngIf="dscf.security.errors.required" class="error">Security is
                                                                    required</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 form-group">
                                                            <label>Recipients</label>
                                                            <select class="form-control" formControlName="recipient_id" id="recipient_id" (change)="onRecipient($event)">
                                                                <option value="">Select Recipient</option>
                                                                <option *ngFor="let hu of users;" value="{{hu.user_id._id}}">
                                                                    {{ hu.user_id.first_name }} {{ hu.user_id.last_name }}
                                                                    ({{hu.hierarchy_id.designation}})</option>
                                                                <option value="invite">Invite New Recipient</option>
                                                            </select>
                                                            <div *ngIf="isSubmittedDiscussionForm && dscf.recipient_id.errors"
                                                                class="invalid-feedback">
                                                                <label *ngIf="dscf.recipient_id.errors.required" class="error">Recipient is
                                                                    required</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 form-group">
                                                            <label>Subject</label>
                                                            <input type="text" class="form-control" placeholder="Subject" formControlName="subject"
                                                                [ngClass]="{ 'is-invalid': isSubmittedDiscussionForm && dscf.subject.errors }">
                                                            <div *ngIf="isSubmittedDiscussionForm && dscf.subject.errors" class="invalid-feedback">
                                                                <label *ngIf="dscf.subject.errors.required" class="error">Subject is
                                                                    required</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 form-group">
                                                            <label>Message</label>
                                                            <textarea class="form-control" placeholder="Message" formControlName="message"
                                                                [ngClass]="{ 'is-invalid': isSubmittedDiscussionForm && dscf.message.errors }"></textarea>
                                                            <div *ngIf="isSubmittedDiscussionForm && dscf.message.errors" class="invalid-feedback">
                                                                <label *ngIf="dscf.message.errors.required" class="error">Message is
                                                                    required</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 form-group">
                                                            <label>Attachment</label>
                                                            <input type="file" (change)="uploadDiscussionAttachment($event.target.files)">
                                                        </div>
                                                        <div class="col-md-12 form-group text-right">
                                                            <button type="submit" class="btn btn-primary btn-space"
                                                                (click)="onSubmitDiscussion()">Save</button>
                                                            <button type="reset" class="btn btn-default"
                                                                (click)="resetDiscussionForm()">Cancel</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </mat-expansion-panel>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    <!-- END BLOCK: BRAINSTORM AND IMPROVE -->

    <!-- BEGIN BLOCK: SELECTED MODULE ITEM -->
    <!-- ACTIVE: If selectedModules has some value (selectedModules !== '') -->
        <div class="col-md-9" *ngIf="selectedModules !== ''"
        [hidden]="!selectedModules || selectedModules == '' || parentIsActiveSelection || selectedPhase == 'C'">

            <!-- HEADER -->
            <div *ngIf="moduleItemActive" class="page-title" style="margin-bottom: 12px;">
                {{textDecoration(selectedModules)}}
            </div>

            <!-- DISPLAYS RELATED FORM DATA -->
            <!-- ACTIVE FORM GROUP: MODULEFORM -->
            <!-- DATE IDS: MODULE-START-DATE-FILLED/MODULE-END-DATE-FILLED -->
            <mat-expansion-panel class="expanse-panel" [expanded]="true" [hidden]="!parentIsActiveSelection" *ngIf="parentIsActiveSelection">
                <mat-expansion-panel-header>
                    <div class="page-title">
                        <h3>{{textDecoration(selectedModules)}} Dashboard</h3>
                    </div>
                </mat-expansion-panel-header>
                <div class="panel panel-cutom-blue">
                    <div class="panel-body">
                        <form class="p-3" [formGroup]="ModuleForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Short Name<span>*</span></label>
                                        <input type="text" formControlName="short_name" class="form-control"
                                            placeholder="Short name"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.short_name.errors }"
                                            autocomplete="off">
                                        <div *ngIf="isModuleFormSubmitted && mf.short_name.errors" class="invalid-feedback">
                                            <div *ngIf="mf.short_name.errors.required">Short name is required</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Long Name<span>*</span></label>
                                        <input type="text" formControlName="long_name" class="form-control"
                                            placeholder="Long name"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.long_name.errors }"
                                            autocomplete="off">
                                        <div *ngIf="isModuleFormSubmitted && mf.long_name.errors" class="invalid-feedback">
                                            <div *ngIf="mf.long_name.errors.required">Long name is required</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 form-group">
                                    <label for="exampleInputPassword1">Start Date<span>*</span></label>
                                    <div class="input-group input-append bootstrap-datepicker">
                                        <input type="text" id="module-start-date-filled" class="form-control date-picker"
                                            placeholder="Start Date" autocomplete="off">
                                        <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                class="fa fa-calendar"></i></span>
                                    </div>
                                </div>
                                <div class="col-md-6 form-group">
                                    <label for="exampleInputPassword1">End Date<span>*</span></label>
                                    <div class="input-group input-append bootstrap-datepicker">
                                        <input type="text" id="module-end-date-filled" class="form-control date-picker"
                                            placeholder="End Date" autocomplete="off">
                                        <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                class="fa fa-calendar"></i></span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Security<span>*</span></label>
                                        <select formControlName="security" class="form-control">
                                            <option value="">Select Security</option>
                                            <option value="public">Public</option>
                                            <option value="private">Private</option>
                                        </select>
                                        <div *ngIf="isModuleFormSubmitted && mf.security.errors" class="invalid-feedback">
                                            <div *ngIf="mf.security.errors.required">Security is required</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12" [hidden]="selectedModules == 'motive' || selectedModules == 'analysis'">
                                    <div class="form-group">
                                        <label>Description<span>*</span></label>
                                        <textarea formControlName="description" class="form-control" placeholder="Description"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.description.errors }"
                                            autocomplete="off"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6"
                                    [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Production Target</label>
                                        <input type="number" formControlName="production_target" class="form-control"
                                            placeholder="Production Target"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6"
                                    [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Expense Target</label>
                                        <input type="number" formControlName="expense_target" class="form-control"
                                            placeholder="Expense Target"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6"
                                    [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Production Threshold</label>
                                        <input type="number" formControlName="personal_production_variance"
                                            class="form-control" placeholder="High Variance"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6"
                                    [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Expense Threshold</label>
                                        <input type="number" formControlName="personal_expense_variance" class="form-control"
                                            placeholder="High Variance"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6"
                                    [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Production Weight</label>
                                        <input type="number" formControlName="production_weight" class="form-control"
                                            placeholder="Production Weight"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.production_weight.errors }"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6"
                                    [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Expense Weight</label>
                                        <input type="number" formControlName="expense_weight" class="form-control"
                                            placeholder="Expense Weight"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.expense_weight.errors }"
                                            autocomplete="off">
                                    </div>
                                </div>
            
                                <div class="col-md-12 page-title mt-30" *ngIf="selectedModules == 'analysis'">
                                    <h3 class="breadcrumb-header">Analysis Framework</h3>
                                </div>
                                <div class="col-md-12 page-title mt-30" *ngIf="selectedModules == 'intelligence'">
                                    <h3 class="breadcrumb-header">Intelligence Details</h3>
                                </div>
            
                                <div class="col-md-12" *ngIf="selectedModules == 'analysis'">
                                    <div class="form-group">
                                        <label>Question</label>
                                        <input type="text" formControlName="question" class="form-control"
                                            placeholder="Question"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.question.errors }"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-12" *ngIf="selectedModules == 'analysis'">
                                    <div class="form-group">
                                        <label>Answer</label>
                                        <input type="text" formControlName="answer" class="form-control" placeholder="Answer"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.answer.errors }"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6" *ngIf="selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Value</label>
                                        <input type="text" formControlName="intelligence_value" class="form-control"
                                            placeholder="Value" autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6" *ngIf="selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Response</label>
                                        <input type="text" formControlName="intelligence_response" class="form-control"
                                            placeholder="Response" autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6"
                                    *ngIf="selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Source</label>
                                        <input type="text" formControlName="source" class="form-control" placeholder="Source"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.source.errors }"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6"
                                    *ngIf="selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <div class="form-group">
                                        <label>Link</label>
                                        <input type="text" formControlName="link" class="form-control" placeholder="Link"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.link.errors }"
                                            autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6 form-group"
                                    *ngIf="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                    <label>Attachment</label>
                                    <input type="file" (change)="uploadAttachment($event.target.files)">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </mat-expansion-panel>

        </div>
    <!-- END BLOCK: SELECTED MODULE ITEM -->

    <!-- BEGIN BLOCK: DEACTIVATE -->
    <!-- ACTIVE: selectedPhase:D -->
    <!-- ACTIVE FROM GROUP: CHILDPLANFORM CONFLIC PRESENT (?) -->
    <!-- DATE IDS: 5/6 CONFLICT PRESENT -->
        <div class="col-md-9" *ngIf="selectedPhase == 'D'">
            <div class="expanse-panel" [hidden]="parentIsActiveSelection">
                <form #kform="ngForm" class="p-3" [formGroup]="childPlanForm">
                    <div class="panel panel-cutom-blue">
                        <div class="panel-body">
                            <div style="padding: 10px;">
                                <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
    
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label" for="exampleInputEmail1">Short Name<span>*</span></label>
                                        <input type="text" formControlName="short_name" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Short name"
                                            [ngClass]="{ 'is-invalid': submitted && f.short_name.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.short_name.errors" class="invalid-feedback">
                                            <div *ngIf="f.short_name.errors.required">Short name is required</div>
                                        </div>
                                        </div>
    
                                        <div style="display: flex;  margin-bottom: 12px;">
    
                                        <label class="parent-item-label" for="exampleInputPassword1">Long Name<span>*</span></label>
                                        <input type="text" id="long_name" formControlName="long_name" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Long name"
                                            [ngClass]="{ 'is-invalid': submitted && f.long_name.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.long_name.errors" class="invalid-feedback">
                                            <div *ngIf="f.long_name.errors.required">Long name is required</div>
                                        </div>
                                        </div>
                                    </div>
                                
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
    
                                        <label class="parent-item-label" for="exampleInputPassword1">Start Date<span>*</span></label>
                                        <div class="input-group input-append bootstrap-datepicker">
                                            <input type="text" id="date-input5" formControlName="start_date"
                                            class="text-white bg-dark parent-item-val form-control form-control-spec bg-dark date-picker" placeholder="Start Date" autocomplete="off">
                                            <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                    class="fa fa-calendar"></i></span>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label" for="exampleInputPassword1">End Date<span>*</span></label>
                                        <div class="bg-dark input-group input-append bootstrap-datepicker">
                                            <input type="text" id="date-input6" formControlName="end_date"
                                            class="text-white bg-dark parent-item-val form-control form-control-spec date-picker" placeholder="End Date" autocomplete="off">
                                            <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                    class="fa fa-calendar"></i></span>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">

                                        <div style="display: flex;  margin-bottom: 12px;">
    
                                            <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                            <div class=" parent-item-label-spec">Description</div>
                                            <textarea type="text" formControlName="description" class="form-control bg-dark"
                                            placeholder="Click to edit description" style="border-radius: 0px; border: none; border-left: 2px solid #fff; padding-left: 12px;"></textarea>
                                            <div *ngIf="submitted && f.description.errors" class="invalid-feedback">
                                                <div *ngIf="f.description.errors.required">Description is required</div>
                                            </div>                                    
                                        </div>
                                        </div>
                                    </div>
    
                                    <mat-expansion-panel  [expanded]="true">
                                    <mat-expansion-panel-header class="page-title" style="margin-bottom: 24px;" >
                                        <h3>Dashboard</h3>
                                    </mat-expansion-panel-header>
                                    <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">

                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label parent-item-label-alert" for="exampleInputEmail1">Production Target</label>
                                        <input type="text" formControlName="production_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Short name"
                                            [ngClass]="{ 'is-invalid': submitted && f.production_target.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.production_target.errors" class="invalid-feedback">
                                            <div *ngIf="f.production_target.errors.required">Production target is required</div>
                                        </div>
                                        </div>
    
                                        <div style="display: flex;  margin-bottom: 12px;">
    
                                        <label class="parent-item-label parent-item-label-alert" for="exampleInputPassword1">Expense Target</label>
                                        <input type="text" id="long_name" formControlName="expense_target" class="text-white bg-dark parent-item-val form-control form-control-spec"
                                            placeholder="Long name"
                                            [ngClass]="{ 'is-invalid': submitted && f.expense_target.errors }" autocomplete="off">
                                        <div *ngIf="submitted && f.expense_target.errors" class="invalid-feedback">
                                            <div *ngIf="f.expense_target.errors.required">Expense target is required</div>
                                        </div>
                                        </div>
    
                                        <div style="display: flex;  margin-bottom: 12px;">
                                            <label class="parent-item-label parent-item-label-alert">Target Type</label>
                                            <select class="text-white bg-dark parent-item-val form-control form-control-spec" formControlName="production_type">
                                                <option value="">Select Type</option>
                                                <option value="dollars">Dollars</option>
                                                <option value="units">Units</option>
                                                <option value="percentage">Percentage</option>
                                            </select>
                                            <div *ngIf="IsLoginFormValid && jval.production_type.errors" class="invalid-feedback">
                                                <label *ngIf="jval.production_type.errors.required" class="error">Production type is
                                                    required</label>
                                            </div>
                                        </div>   
                                    </div>
    
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Production Threshold</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Personal Production Threshold" formControlName="personal_production_variance" [ngClass]="{ 'is-invalid': submitted && f.production_low_variance_alert.errors }">
                                        <div *ngIf="submitted && f.production_low_variance_alert.errors" class="invalid-feedback">
                                            <label *ngIf="f.production_low_variance_alert.errors.required" class="error">Production threshold is required</label>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Expense Threshold</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Personal Expense Threshold" formControlName="personal_expense_variance" [ngClass]="{ 'is-invalid': submitted && f.production_high_variance_alert.errors }">
                                        <div *ngIf="submitted && f.production_high_variance_alert.errors" class="invalid-feedback">
                                            <label *ngIf="f.production_high_variance_alert.errors.required" class="error">Expense threshold is required</label>
                                        </div>
                                    </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Production Weight</label>
                                        <input type="number"class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Production weight" formControlName="production_weight" [ngClass]="{ 'is-invalid': submitted && f.production_weight.errors }">
                                        <div *ngIf="submitted && f.production_weight.errors" class="invalid-feedback">
                                            <label *ngIf="f.production_weight.errors.required" class="error">Expense weight is required</label>
                                        </div>
                                        </div>
                                        <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label">Expense Weight</label>
                                        <input type="number" class="text-white bg-dark parent-item-val form-control form-control-spec" placeholder="Expense weight" formControlName="expense_weight" [ngClass]="{ 'is-invalid': submitted && f.expense_weight.errors }">
                                        <div *ngIf="submitted && f.expense_weight.errors" class="invalid-feedback">
                                            <label *ngIf="f.expense_weight.errors.required" class="error">Expense weight is required</label>
                                        </div>
                                        </div>
    
                                    </div>
                                    </div>
                                    <div class="col-md-12 form-group text-right">
                                        <button type="submit " (click)="onSubmit()"
                                            [disabled]="!checkforgoaledit && !isSharedPlanPermission"
                                            class="btn btn-primary btn-space">Save</button>
                                        <button type="reset" (click)="reset()" [disabled]="!checkforgoaledit "
                                            class="btn btn-default">Clear</button>
                                    </div>
                                    </mat-expansion-panel>
    
                                    <mat-expansion-panel class="expanse-panel expanse-panel-discussion">
                                        <mat-expansion-panel-header class="page-title">
                                            <h3>Communication</h3>
                                        </mat-expansion-panel-header>
                                        <div class="panel panel-cutom-blue" style="border: none; box-shadow: none;">
                                            <div class="panel-body">
                                                <form [formGroup]="DiscussionForm">
                                                    <div class="row">
                                                        <div class="col-md-6 form-group">
                                                            <label>Security</label>
                                                            <select class="form-control" formControlName="security">
                                                                <option value="">Select Security</option>
                                                                <option value="public">Public</option>
                                                                <option value="private">Private</option>
                                                            </select>
                                                            <div *ngIf="isSubmittedDiscussionForm && dscf.security.errors" class="invalid-feedback">
                                                                <label *ngIf="dscf.security.errors.required" class="error">Security is
                                                                    required</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 form-group">
                                                            <label>Recipients</label>
                                                            <select class="form-control" formControlName="recipient_id" id="recipient_id" (change)="onRecipient($event)">
                                                                <option value="">Select Recipient</option>
                                                                <option *ngFor="let hu of users;" value="{{hu.user_id._id}}">
                                                                    {{ hu.user_id.first_name }} {{ hu.user_id.last_name }}
                                                                    ({{hu.hierarchy_id.designation}})</option>
                                                                <option value="invite">Invite New Recipient</option>
                                                            </select>
                                                            <div *ngIf="isSubmittedDiscussionForm && dscf.recipient_id.errors"
                                                                class="invalid-feedback">
                                                                <label *ngIf="dscf.recipient_id.errors.required" class="error">Recipient is
                                                                    required</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 form-group">
                                                            <label>Subject</label>
                                                            <input type="text" class="form-control" placeholder="Subject" formControlName="subject"
                                                                [ngClass]="{ 'is-invalid': isSubmittedDiscussionForm && dscf.subject.errors }">
                                                            <div *ngIf="isSubmittedDiscussionForm && dscf.subject.errors" class="invalid-feedback">
                                                                <label *ngIf="dscf.subject.errors.required" class="error">Subject is
                                                                    required</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12 form-group">
                                                            <label>Message</label>
                                                            <textarea class="form-control" placeholder="Message" formControlName="message"
                                                                [ngClass]="{ 'is-invalid': isSubmittedDiscussionForm && dscf.message.errors }"></textarea>
                                                            <div *ngIf="isSubmittedDiscussionForm && dscf.message.errors" class="invalid-feedback">
                                                                <label *ngIf="dscf.message.errors.required" class="error">Message is
                                                                    required</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6 form-group">
                                                            <label>Attachment</label>
                                                            <input type="file" (change)="uploadDiscussionAttachment($event.target.files)">
                                                        </div>
                                                        <div class="col-md-12 form-group text-right">
                                                            <button type="submit" class="btn btn-primary btn-space"
                                                                (click)="onSubmitDiscussion()">Save</button>
                                                            <button type="reset" class="btn btn-default"
                                                                (click)="resetDiscussionForm()">Cancel</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </mat-expansion-panel>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <mat-expansion-panel class="expanse-panel" [expanded]="true">
                <mat-expansion-panel-header class="">
                    <div class="page-title">
                        <h3>Deactivate</h3>
                    </div>
                </mat-expansion-panel-header>
                <div class="panel panel-cutom-blue">
                    <div class="panel-body">
                        <div class="table-responsive" *ngIf="dividearrayintothreepart !== 2">
                            <table class="table table-striped" style="text-align: center;">
                                <thead>
                                    <tr>
                                        <th class="prioritize-blue" style="text-align: center;">Deactivate</th>
                                        <th class="prioritize-blue" style="text-align: center;">Priority</th>
                                        <th class="prioritize-blue" style="text-align: center;">(G) Short Name</th>
                                        <th class="prioritize-blue" style="text-align: center;">Start Date</th>
                                        <th class="prioritize-blue" style="text-align: center;">End Date</th>
                                        <th class="prioritize-blue" style="text-align: center;">Creator</th>
                                    </tr>
                                </thead>
                                <tbody *ngIf="goals && goals.length > 0">
                                    <tr *ngFor="let p of goals; let i=index">
                                        <td class="text-center">
                                            <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Activate!"
                                                *ngIf="p.deactivate==1" (click)="changedeactivate(p._id,0)"><img
                                                    src="assets/images/avatars/quit.png"></a>
                                            <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Deactivate!"
                                                *ngIf="p.deactivate==0" (click)="changedeactivate(p._id,1)"><img
                                                    src="assets/images/avatars/correct.png"></a>
                                        </td>
                                        <td>{{ p.prioritize }}</td>
                                        <td>(G) {{ p.short_name }}</td>
                                        <td>{{ p.start_date | prioritizegoaldate }}</td>
                                        <td>{{ p.end_date | prioritizegoaldate}}</td>
                                        <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="goals && goals.length == 0">
                                    <tr>
                                        <td class="text-center" colspan="8"> No Data Available</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="table-responsive" *ngIf="dividearrayintothreepart == 2">
                            <div>
                                <h4>Deactivate : High</h4>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="prioritize-blue">Deactivate</th>
                                        <th class="prioritize-blue">Priority</th>
                                        <th class="prioritize-blue">(G) Short Name</th>
                                        <th class="prioritize-blue">Start Date</th>
                                        <th class="prioritize-blue">End Date</th>
                                        <th class="prioritize-blue">Creator</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let p of high ; let i=index">
                                        <td style="text-align: center;">
                                            <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Activate!"
                                                *ngIf="p.deactivate==1" (click)="changedeactivate(p._id,0)"><img
                                                    src="assets/images/avatars/quit.png"></a>
                                            <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Deactivate!"
                                                *ngIf="p.deactivate==0" (click)="changedeactivate(p._id,1)"><img
                                                    src="assets/images/avatars/correct.png"></a>
                                        </td>
                                        <td>{{ p.prioritize }}</td>
                                        <td>(G) {{ p.short_name }}</td>
                                        <td>{{ p.start_date | prioritizegoaldate }}</td>
                                        <td>{{ p.end_date | prioritizegoaldate}}</td>
                                        <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>

                                    </tr>
                                </tbody>
                            </table>

                            <div>
                                <h4>Deactivate : Medium</h4>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="prioritize-medium">Deactivate</th>
                                        <th class="prioritize-medium">Priority</th>
                                        <th class="prioritize-medium">(G) Short Name</th>
                                        <th class="prioritize-medium">Start Date</th>
                                        <th class="prioritize-medium">End Date</th>
                                        <th class="prioritize-medium">Creator</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let p of medium ; let i=index">
                                        <td style="text-align: center;">
                                            <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Activate!"
                                                *ngIf="p.deactivate==1" (click)="changedeactivate(p._id,0)"><img
                                                    src="assets/images/avatars/quit.png"></a>
                                            <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Deactivate!"
                                                *ngIf="p.deactivate==0" (click)="changedeactivate(p._id,1)"><img
                                                    src="assets/images/avatars/correct.png"></a>
                                        </td>
                                        <td>{{ p.prioritize }}</td>
                                        <td>(G) {{ p.short_name }}</td>
                                        <td>{{ p.start_date | prioritizegoaldate }}</td>
                                        <td>{{ p.end_date | prioritizegoaldate}}</td>
                                        <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>

                                    </tr>
                                </tbody>
                            </table>

                            <div>
                                <h4>Deactivate : Low</h4>
                            </div>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="prioritize-low">Deactivate</th>
                                        <th class="prioritize-low">Priority</th>
                                        <th class="prioritize-low">(G) Short Name</th>
                                        <th class="prioritize-low">Start Date</th>
                                        <th class="prioritize-low">End Date</th>
                                        <th class="prioritize-low">Creator</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let p of low ; let i=index">
                                        <td style="text-align: center;">
                                            <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Activate!"
                                                *ngIf="p.deactivate==1" (click)="changedeactivate(p._id,0)"><img
                                                    src="assets/images/avatars/quit.png"></a>
                                            <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Deactivate!"
                                                *ngIf="p.deactivate==0" (click)="changedeactivate(p._id,1)"><img
                                                    src="assets/images/avatars/correct.png"></a>
                                        </td>
                                        <td>{{ p.prioritize }}</td>
                                        <td>(G) {{ p.short_name }}</td>
                                        <td>{{ p.start_date | prioritizegoaldate }}</td>
                                        <td>{{ p.end_date | prioritizegoaldate}}</td>
                                        <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </mat-expansion-panel>
        </div>
    <!-- END BLOCK: DEACTIVATE -->

    <!-- BEGIN BLOCK: PRIORITIZE -->
    <!-- ACTIVE: selectedPhase:P -->
    <!-- DIVIDES INTO PARTS? -->
        <div class="col-md-9" *ngIf="selectedPhase == 'P'">
            <mat-expansion-panel class="expanse-panel" [expanded]="true">
                <mat-expansion-panel-header class="">
                    <div class="page-title">
                        <h3>Prioritize</h3>
                    </div>
                </mat-expansion-panel-header>
                <div class="panel panel-cutom-blue">
                    <div class="panel-body">
                        <div class="table-responsive" >
                            <table class="table table-striped" style="text-align: center !important;">
                                <thead>
                                    <tr style="text-align: center;">
                                        <th class="prioritize-blue" style="text-align: center;">Up</th>
                                        <th class="prioritize-blue" style="text-align: center;">Down</th>
                                        <th class="prioritize-blue" style="max-width: 50px; text-align: center;">Priority</th>
                                        <th class="prioritize-blue" style="text-align: center;">(G) Short Name</th>
                                        <th class="prioritize-blue" style="text-align: center;">Start Date</th>
                                        <th class="prioritize-blue" style="text-align: center;">End Date</th>
                                        <th class="prioritize-blue" style="text-align: center;">Creator</th>
                                    </tr>
                                </thead>
                                <tbody id="tbl">
                                    <tr *ngIf="priorityGoals.length == 0">
                                        <td style="text-align: center;" colspan="8"> No Data Available</td>
                                    </tr>
                                    <tr *ngFor="let p of priorityGoals; let i=index">
                                        <td style="text-align: center;">
                                            <a style="cursor: pointer;"
                                                (click)="changepriority(p._id,p.prioritize, p.prioritize-1)"><img
                                                    src="assets/images/avatars/arrow-up.png"></a>
                                        </td>
                                        <td style="text-align: center;">
                                            <a style="cursor: pointer;"
                                                (click)="changepriority(p._id,p.prioritize, p.prioritize+1)"><img
                                                    src="assets/images/avatars/arrow-down.png"></a>
                                        </td>
                                        <td>
                                            <span class="editable" id="label-priority-{{i}}"
                                                (click)="updatepriority(i)">{{ p.prioritize }}</span>
                                            <span style="display: none;" id="priority-text-{{i}}">
                                                <input class="form-control" value="{{ p.prioritize }}"
                                                    id="input-priority-{{i}}" type="number" min="1"
                                                    style="float: left;width: 50px;">&nbsp;
                                                <a style="cursor:pointer" (click)="updategoalpriority(p._id,i)">
                                                    <img style="width:20px;height: 20px;margin-top: 7px;"
                                                        src="assets/images/avatars/correct.png">
                                                </a>
                                            </span>
                                        </td>
                                        <td>(G) {{ p.short_name }}</td>
                                        <td>{{ p.start_date | prioritizegoaldate }}</td>
                                        <td>{{ p.end_date | prioritizegoaldate}}</td>
                                        <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </mat-expansion-panel>
        </div>
    <!-- END BLOCK: PRIORITIZE -->

    <!-- BEGIN BLOCK: PROPOSE -->
        <div class="col-md-9" *ngIf="selectedPhase == 'PR'">
            <mat-expansion-panel class="expanse-panel" [expanded]="true">
            <mat-expansion-panel-header class="">
                <div class="page-title">
                    <h3>Propose</h3>
                </div>
            </mat-expansion-panel-header>

            <!-- DATA TBL ID: table-responsive -->
            <!-- DIVIDES INTO PARTS? -->
            <div class="panel panel-cutom-blue">
                <div class="table-responsive" *ngIf="isProposeDevidedInParts == 1">
                    <table class="table table-striped" style="text-align: center;">
                        <thead>
                            <tr>
                                <th class="prioritize-blue" style="text-align: center;">Propose for Voting</th>
                                <th class="prioritize-blue" style="text-align: center;">Priority</th>
                                <th class="prioritize-blue" style="text-align: center;">(G) Short Name</th>
                                <th class="prioritize-blue" style="text-align: center;">Start Date</th>
                                <th class="prioritize-blue" style="text-align: center;">End Date</th>
                                <th class="prioritize-blue" style="text-align: center;">Creator</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="proposeGoals.length == 0">
                                <td style="text-align: center;" colspan="8"> No Data Available</td>
                            </tr>
                            <tr *ngFor="let p of proposeGoals; let i=index;">
                                <td><input type="checkbox" (change)="handleChange($event,p._id)"></td>
                                <td>{{ p.prioritize }}</td>
                                <td>(G) {{ p.short_name }}</td>
                                <td>{{ p.start_date | prioritizegoaldate }}</td>
                                <td>{{ p.end_date | prioritizegoaldate}}</td>
                                <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="table-responsive" *ngIf="isProposeDevidedInParts == 2">
                    <div>
                        <h4>Propose : High</h4>
                    </div>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Send To Team Page</th>
                                <th class="prioritize-blue">Propose</th>
                                <th class="prioritize-blue">Priority</th>
                                <th class="prioritize-blue">(G) Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Creator</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of highPriorityGoals; let i=index">
                                <td><input type="checkbox" (change)="handleChange($event,p._id)"></td>
                                <td style="text-align: center;">
                                    <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Send Proposal!"
                                        *ngIf="p.propose==undefined || p.propose==0 "
                                        (click)="changeproposal(p._id,1)"><img src="assets/images/avatars/quit.png"></a>
                                    <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Cancel Proposal!"
                                        *ngIf="p.propose==1" (click)="changeproposal(p._id,0)"><img
                                            src="assets/images/avatars/correct.png"></a>
                                </td>
                                <td>{{ p.prioritize }}</td>
                                <td>(G) {{ p.short_name }}</td>
                                <td>{{ p.start_date | prioritizegoaldate }}</td>
                                <td>{{ p.end_date | prioritizegoaldate}}</td>
                                <td>{{ p.user_id.short_name }}</td>
                            </tr>
                        </tbody>
                    </table>

                    <div>
                        <h4>Propose : Medium</h4>
                    </div>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Send To Team Page</th>
                                <th class="prioritize-medium">Propose</th>
                                <th class="prioritize-medium">Priority</th>
                                <th class="prioritize-medium">(G) Short Name</th>
                                <th class="prioritize-medium">Start Date</th>
                                <th class="prioritize-medium">End Date</th>
                                <th class="prioritize-medium">Creator</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of mediumPriorityGoals; let i=index">
                                <td><input type="checkbox" (change)="handleChange($event,p._id)"></td>
                                <td style="text-align: center;">
                                    <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Send Proposal!"
                                        *ngIf="p.propose==undefined || p.propose==0 "
                                        (click)="changeproposal(p._id,1)"><img src="assets/images/avatars/quit.png"></a>
                                    <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Cancel Proposal!"
                                        *ngIf="p.propose==1" (click)="changeproposal(p._id,0)"><img
                                            src="assets/images/avatars/correct.png"></a>
                                </td>
                                <td>{{ p.prioritize }}</td>
                                <td>(G) {{ p.short_name }}</td>
                                <td>{{ p.start_date | prioritizegoaldate }}</td>
                                <td>{{ p.end_date | prioritizegoaldate}}</td>
                                <td>{{ p.user_id.short_name }}</td>
                            </tr>
                        </tbody>
                    </table>

                    <div>
                        <h4>Propose : Low</h4>
                    </div>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Send To Team Page</th>
                                <th class="prioritize-low">Propose</th>
                                <th class="prioritize-low">Priority</th>
                                <th class="prioritize-low">(G) Short Name</th>
                                <th class="prioritize-low">Start Date</th>
                                <th class="prioritize-low">End Date</th>
                                <th class="prioritize-low">Creator</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of lowPriorityGoals; let i=index">
                                <td><input type="checkbox" (change)="handleChange($event,p._id)"></td>
                                <td style="text-align: center;">
                                    <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Send Proposal!"
                                        *ngIf="p.propose==undefined || p.propose==0 "
                                        (click)="changeproposal(p._id,1)"><img src="assets/images/avatars/quit.png"></a>
                                    <a style="cursor: pointer;" data-toggle="tooltip" title="Click for Cancel Proposal!"
                                        *ngIf="p.propose==1" (click)="changeproposal(p._id,0)"><img
                                            src="assets/images/avatars/correct.png"></a>
                                </td>
                                <td>{{ p.prioritize }}</td>
                                <td>(G) {{ p.short_name }}</td>
                                <td>{{ p.start_date | prioritizegoaldate }}</td>
                                <td>{{ p.end_date | prioritizegoaldate}}</td>
                                <td>{{ p.user_id.short_name }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            </mat-expansion-panel>
        </div>
    <!-- END BLOCK: PROPOSE -->

    <!-- BEGIN BLOCK: VOTE -->
        <div class="col-md-9" *ngIf="selectedPhase == 'V'">
            <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
                <div class="page-title">
                    <h3>Vote</h3>
                </div>
            </mat-expansion-panel-header>

            <!-- DATA TBL ID: table-vote -->
                <div class="panel panel-cutom-blue">
                    <table id="table-vote"  class="display table table-data-width">
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Vote Up</th>
                                <th class="prioritize-blue">Vote Down</th>
                                <th class="prioritize-blue">Priority</th>
                                <th class="prioritize-blue">(G) Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                            </tr>
                        </thead>
                        <tbody *ngIf="voteGoals && voteGoals.length > 0">
                            <tr *ngFor="let p of voteGoals; let i=index">
                                <td style="text-align: center;">
                                    <a style="cursor: pointer;" (click)="changevote(p._id,'up')"><img
                                            [ngClass]="{'opacity':checkvote(p)}" src="assets/images/avatars/up.png"></a>
                                </td>
                                <td style="text-align: center;">
                                    <a style="cursor: pointer;" (click)="changevote(p._id,'down')"><img
                                            [ngClass]="{'opacity':checkvote(p)}"
                                            src="assets/images/avatars/down.png"></a>
                                </td>
                                <td>{{ p.prioritize }}</td>
                                <td>(G) {{ p.short_name }}</td>
                                <td>{{ p.start_date | prioritizegoaldate }}</td>
                                <td>{{ p.end_date | prioritizegoaldate}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <table *ngIf="voteGoals.length == 0" id="table-vote" class="display table table-data-width">
                        <tbody>
                            <tr>
                                <td colspan="7" class="text-center">Details not found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </mat-expansion-panel>
        </div>
    <!-- END BLOCK: VOTE -->

    <!-- BEGIN BLOCK: SELECT -->
        <div class="col-md-9" *ngIf="selectedPhase == 'S'">
            <mat-expansion-panel class="expanse-panel" [expanded]="true">
            <mat-expansion-panel-header class="">
                <div class="page-title">
                    <h3>Select</h3>
                </div>
            </mat-expansion-panel-header>

            <!-- DATA TBL ID: table-select -->
            <div class="panel panel-cutom-blue">
                <div class="table-responsive">
                    <table id="table-select" datatable [dtOptions]="dtOptionsSelect"
                        class="display table table-data-width">
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Select</th>
                                <th class="prioritize-blue">Vote Up</th>
                                <th class="prioritize-blue">Vote Down</th>
                                <th class="prioritize-blue">Priority</th>
                                <th class="prioritize-blue">(G) Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Creator</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of selectGoals; let i=index;">
                                <td>
                                    <label class="switch">
                                        <input type="checkbox" (change)="updateplanselect($event, p._id)"
                                            checked="{{ (p.select == 1  ) ? 'checked' : '' }}">
                                        <span class="slider round"></span>
                                    </label>
                                </td>
                                <td>
                                    <div>{{p.voteup.length}}</div>
                                </td>
                                <td>
                                    <div>{{p.votedown.length}}</div>
                                </td>
                                <td>{{ p.prioritize }}</td>
                                <td>(G) {{ p.short_name }}</td>
                                <td>{{ p.start_date | prioritizegoaldate }}</td>
                                <td>{{ p.end_date | prioritizegoaldate}}</td>
                                <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </mat-expansion-panel>
        </div>
    <!-- END BLOCK: SELECT -->

    <!-- BEGIN BLOCK: DELEGATE -->
        <div class="col-md-9" *ngIf="selectedPhase == 'DG'">
            <div class="">
                <div class="page-title">
                    <h3>Delegate</h3>
                </div>
            </div>

            <!-- DATA TBL ID: table-delegate -->
            <div class="panel panel-cutom-blue">
                <div class="table-responsive">
                    <table id="table-delegate" datatable [dtOptions]="dtOptionsDelegate" [dtTrigger]="dtTriggerDelegate"
                        class="display table table-data-width">
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Delegate</th>
                                <th class="prioritize-blue">Delegation (%)</th>
                                <th class="prioritize-blue">Priority</th>
                                <th class="prioritize-blue">(G) Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Creator</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of delegateGoals; let i=index;">
                                <td>
                                    <!-- <button class="btn btn-success"
                                        (click)="goaldelegate(p._id,p.short_name)">Delegate</button> -->
                                    <button class="btn btn-success"
                                        (click)="goaldelegate(p._id, p.short_name)">Delegate</button>
                                </td>
                                <td>{{ p.delegate_percentage }} %</td>
                                <td>{{ p.prioritize }}</td>
                                <td>(G) {{ p.short_name }}</td>
                                <td>{{ p.start_date | prioritizegoaldate }}</td>
                                <td>{{ p.end_date | prioritizegoaldate}}</td>
                                <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-10">
                    <div class="page-title">
                        <h3 class="breadcrumb-header">Delegated {{ textDecoration(selectedModules) }}</h3>
                    </div>
                    <table class="display table table-data-width">
                        <thead>
                            <tr>
                                <th class="prioritize-blue">(P) Short name</th>
                                <th class="prioritize-blue">(G) Short Name</th>
                                <th class="prioritize-blue">Percentage</th>
                                <th class="prioritize-blue">Creator</th>
                                <th class="prioritize-blue">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="delegatedGoals && delegatedGoals.length==0">
                                <td style="text-align: center;" colspan="5"> No Data Available</td>
                            </tr>
                            <tr *ngFor="let delegates of delegatedGoals; let i=index;">
                                <td>{{ delegates.plan_id.short_name }}</td>
                                <td>{{ delegates.goal_id.short_name }}</td>
                                <td>{{ delegates.percentage }}</td>
                                <td>{{ delegates.user_id.first_name }} {{ delegates.user_id.last_name }}</td>
                                <td>
                                    <a style="cursor: pointer;" data-toggle="tooltip" title="Accept"
                                        (click)="changegoaldelegatestatus(delegates._id,1)"><img
                                            src="assets/images/avatars/correct.png"></a>&nbsp;
                                    <a style="cursor: pointer;" data-toggle="tooltip" title="Reject"
                                        (click)="changegoaldelegatestatus(delegates._id,2)"><img
                                            src="assets/images/avatars/quit.png"></a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    <!-- END BLOCK: DELEGATE -->

    <!-- BEGIN BLOCK: COUNTDOWN  -->
        <div class="col-md-9" *ngIf="selectedPhase == 'C'">
            <div class="">
                <div class="page-title">
                    <h3>Countdown</h3>
                </div>
            </div>

            <!-- DATA TBL ID: table-countdown -->
            <div class="panel panel-cutom-blue">
                <table id="table-countdown" datatable [dtOptions]="dtOptionsCountdown" [dtTrigger]="dtTriggerCountdown"
                    class="display table table-data-width">
                    <thead>
                        <tr>
                            <th class="prioritize-blue">(G) Short Name</th>
                            <th class="prioritize-blue">Start Date</th>
                            <th class="prioritize-blue">End Date</th>
                            <th class="prioritize-blue">Creator</th>
                            <th class="prioritize-blue">Countdown</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let p of countdownGoals; let i=index;">
                            <td>(G) {{ p.short_name }}</td>
                            <td>{{ p.start_date | prioritizegoaldate }}</td>
                            <td>{{ p.end_date | prioritizegoaldate}}</td>
                            <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>
                            <td>{{ p.total_time }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    <!-- END BLOCK: COUNTDOWN -->

    <!-- BEGIN BLOCK: LAUNCH -->
        <div class="col-md-9" *ngIf="selectedPhase == 'L'">
            <div class="">
                <div class="page-title">
                    <h3>Launch</h3>
                </div>
            </div>
            <div class="panel panel-cutom-blue">
                <table id="table-launch" datatable [dtOptions]="dtOptionsLaunch" class="display table table-data-width">
                    <thead>
                        <tr>
                            <th class="prioritize-blue">(G) Short Name</th>
                            <th class="prioritize-blue">Start Date</th>
                            <th class="prioritize-blue">End Date</th>
                            <th class="prioritize-blue">Creator</th>
                            <th class="prioritize-blue">Total Project Time</th>
                            <th class="prioritize-blue">Launch</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let p of launchGoals; let i=index">
                            <td>(G) {{ p.short_name }}</td>
                            <td>{{ p.start_date | prioritizegoaldate }}</td>
                            <td>{{ p.end_date | prioritizegoaldate}}</td>
                            <td>{{ p.user_id.first_name }} {{ p.user_id.last_name }}</td>
                            <td>{{ p.total_time }}</td>
                            <td>
                                <button class="btn btn-success" *ngIf="!p.isReportReady" [hidden]="p.isReportReady" (click)="sendForReport($event)" id="{{p._id}}">Launch</button>
                                <button *ngIf="p.isReportReady" [hidden]="!p.isReportReady" id="{{p._id}}" disabled>Launched</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    <!-- END BLOCK: LAUNCH -->

    <!-- BEGIN BLOCK: REPORT -->
        <div class="col-md-9" *ngIf="selectedPhase == 'R'">
            <div class="">
                <div class="page-title">
                    <h3>Reports</h3>
                </div>
            </div>
            <div class="panel panel-cutom-blue">
                <table id="report-table" datatable [dtOptions]="dtOptionsReport" class="display table table-data-width">
                    <thead>
                        <tr>
                            <th class="prioritize-blue">(G) Short Name</th>
                            <th class="prioritize-blue">Production Target</th>
                            <th class="prioritize-blue">Actual Production</th>
                            <th class="prioritize-blue">Expense Target</th>
                            <th class="prioritize-blue">Actual Expense</th>
                            <th class="prioritize-blue">Start Date</th>
                            <th class="prioritize-blue">End Date</th>
                            <th class="prioritize-blue">Creator</th>
                            <th class="prioritize-blue">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let p of reportGoals; let i=index;">
                            <td>(G) {{ p.element.short_name }}</td>
                            <td class="text-center"> {{ p.element.production_target === 'null' ? '-' : p.element.production_target }}</td>
                            <td [ngClass]="p.element.production_target === 'null' ? '' : p.actual_production >= p.element.production_target ? 'up' : 'down'">
                                {{ p.actual_production }}
                            </td>
                            <td class="text-center"> {{ p.element.expense_target === 'null' ? '-' : p.element.expense_target }}</td>
                            <td [ngClass]="p.element.expense_target === 'null' ? '' : p.actual_expense >= p.element.expense_target ? 'down' : 'up'">
                                {{ p.actual_expense }}
                            </td>
                            <!-- <td class="text-center">{{ p.element.expense_target }}</td>
                            <td *ngIf="p.actual_expense >= p.element.expense_target" class="up">{{ p.actual_expense }}
                            </td>
                            <td *ngIf="p.actual_expense < p.element.expense_target" class="down">{{ p.actual_expense }}
                            </td> -->
                            <td>{{ p.element.start_date | prioritizegoaldate }}</td>
                            <td>{{ p.element.end_date | prioritizegoaldate}}</td>
                            <td>{{ p.element.user_id.first_name }} {{ p.element.user_id.last_name }}</td>
                            <td>
                                <button class="btn btn-primary btn-xs btn-rounded"
                                    (click)="showreportform(p.element._id,p.report_id,p)"
                                    title="Add/Update Actual Revenue and Expected"><i class="fa fa-pencil"></i></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    <!-- END BLOCK: REPORT -->

    <!-- BEGIN BLOCK: MEASURE -->
        <div class="col-md-9" *ngIf="selectedPhase == 'M'">
            <mat-expansion-panel class="expanse-panel" [expanded]="true">
                <mat-expansion-panel-header class="">
                    <div class="page-title">
                        <h3>Measure</h3>
                    </div>
                </mat-expansion-panel-header>
                <div class="panel panel-cutom-blue">
                    <div class="row">
                        <!-- TABULAR DATA -->
                        <div>
                            <div class="col-md-6" *ngFor="let plan of parentplanDetails;">
                                <mat-expansion-panel class="expanse-panel" [expanded]="true">
                                    <mat-expansion-panel-header class="page-title">
                                        <h3>
                                            {{plan.short_name}} Summary
                                        </h3>
                                    </mat-expansion-panel-header>
                                    <div class="custom-panel-body col-md-6">
                                        <table class="custom-panel-table custom-panel-blue-table">
                                            <tbody>
                                                <tr>
                                                    <td>Expected Production Target</td>
                                                    <td><span>{{parentplanDetails[0].production_type == 'dollars' ? '$' : ''}}</span>{{ parentplanDetails[0].production_target }}<span>{{parentplanDetails[0].production_type == 'percentage' ? '%' : parentplanDetails[0].production_type == 'units' ? ' Units' : ""}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td>Expected Expense Target</td>
                                                    <td><span>{{parentplanDetails[0].production_type == 'dollars' ? '$' : ''}}</span>{{ parentplanDetails[0].expense_target }}<span>{{parentplanDetails[0].production_type == 'percentage' ? '%' : parentplanDetails[0].production_type == 'units' ? ' Units' : ""}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td>Submitted Reports</td>
                                                    <td>{{reportGoals.length}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="custom-panel-body col-md-6">
                                        <table class="custom-panel-table custom-panel-blue-table">
                                            <tbody>
                                                <tr>
                                                    <td>Gross Burn Rate</td>
                                                    <td><span>{{parentplanDetails[0].production_type == 'dollars' ? '$' : ''}}</span>{{ grossBurnRate }}<span>{{parentplanDetails[0].production_type == 'percentage' ? '%' : parentplanDetails[0].production_type == 'units' ? ' Units' : ""}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td>Net Burn Rate</td>
                                                    <td><span>{{parentplanDetails[0].production_type == 'dollars' ? '$' : ''}}</span>{{ netBurnRate }}<span>{{parentplanDetails[0].production_type == 'percentage' ? '%' : parentplanDetails[0].production_type == 'units' ? ' Units' : ""}}</span></td>
                                                </tr>
                                                <tr>
                                                    <td>Average Production</td>
                                                    <td><span>{{parentplanDetails[0].production_type == 'dollars' ? '$' : ''}}</span>{{ avgProd }}<span>{{parentplanDetails[0].production_type == 'percentage' ? '%' : parentplanDetails[0].production_type == 'units' ? ' Units' : ""}}</span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </mat-expansion-panel>
                                <div>
                                    <div>
                                        <mat-expansion-panel class="expanse-panel">
                                            <mat-expansion-panel-header class="page-title">
                                                <h3>Production Measures</h3>
                                            </mat-expansion-panel-header>
                                            <div>
                                                <table class="custom-panel-table custom-panel-blue-table">
                                                    <tbody>
                                                        <tr>
                                                            <td>Actual Production</td>
                                                            <td><span>{{parentplanDetails[0].production_type == 'dollars' ? '$' : ''}}</span>{{ actualProductionSum || "0" }}<span>{{parentplanDetails[0].production_type == 'percentage' ? '%' : parentplanDetails[0].production_type == 'units' ? ' Units' : ""}}</span></td>
                                                        </tr>
                                                        <tr *ngIf="prodHierarchy.length !== 0">
                                                            <td>Most Productive Plan</td>
                                                            <td>{{prodHierarchy[0].element.short_name}}</td>
                                                        </tr>
                                                        <tr *ngIf="prodHierarchy.length !== 0">
                                                            <td>Least Productive Plan</td>
                                                            <td>{{prodHierarchy[prodHierarchy.length - 1].element.short_name}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </mat-expansion-panel>
                                        <mat-expansion-panel>
                                            <mat-expansion-panel-header class="page-title">
                                                <h3>Expense Measures</h3>
                                            </mat-expansion-panel-header>
                                            <div>
                                                <table class="custom-panel-table custom-panel-blue-table">
                                                    <tbody>
                                                        <tr>
                                                            <td>Actual Expense</td>
                                                            <td><span>{{parentplanDetails[0].production_type == 'dollars' ? '$' : ''}}</span>{{ actualExpenseSum || "0" }}<span>{{parentplanDetails[0].production_type == 'percentage' ? '%' : parentplanDetails[0].production_type == 'units' ? ' Units' : ""}}</span></td>
                                                        </tr>
                                                        <tr *ngIf="expHierarchy.length !== 0">
                                                            <td>Most Expensive Plan</td>
                                                            <td>{{expHierarchy[0].element.short_name}}</td>
                                                        </tr>
                                                        <tr *ngIf="expHierarchy.length !== 0">
                                                            <td>Least Expensive Plan</td>
                                                            <td>{{expHierarchy[expHierarchy.length - 1].element.short_name}}</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </mat-expansion-panel>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="reportGoals.length != 0">
                                <h3>{{parentplanDetails[0].short_name}}</h3>
                                <hr>

                                <!-- Line Chart -->
                                <div [hidden]="chartShown !== 'line' && chartShown !== ''">
                                <canvas baseChart *ngIf="chartIsLoaded"
                                        [datasets]="lineChartMainConfigData"
                                        [chartType]="'line'"
                                        [labels]="lineChartMainLabels"
                                        [colors]="lineChartMainOptions"
                                        >
                                </canvas>
                                </div>

                                <!-- Bar Chart -->
                                <div [hidden]="chartShown !== 'bar'">
                                    <canvas baseChart *ngIf="chartIsLoaded"
                                            [datasets]="lineChartMainConfigData"
                                            [chartType]="'bar'"
                                            [labels]="lineChartMainLabels"
                                            [colors]="lineChartMainOptions"
                                            >
                                    </canvas>
                                </div>

                                <!-- Toggle Group -->
                                <mat-button-toggle-group>
                                    <mat-button-toggle class="btn-primary" (click)="showChart('line')" [ngClass]="chartSh">Line Chart</mat-button-toggle>
                                    <mat-button-toggle class="btn-primary" (click)="showChart('bar')">Bar Chart</mat-button-toggle>
                                </mat-button-toggle-group>
                            </div>
                            <div class="col-md-6" *ngIf="reportGoals.length == 0">
                                <h4>To view report statistics at least 1 report must be filed.</h4>
                            </div>
                        </div>


                        <!-- ERROR: NO DATA -->
                        <!-- <div *ngIf="isDetailsFound" class="mb-10">
                            <div class="col-md-12 text-center">
                                <h4>Plan details has not been found.</h4>
                            </div>
                        </div> -->

                        <!-- GRAPHICAL DATA -->
                        <div class="col-md-12 row mt-30">
                            <div class="col-md-6">
                                
                            </div>
                        </div>

                    </div>
                </div>
            </mat-expansion-panel>
        </div>
    <!-- END BLOCK: MEASURE -->

    <!-- BEGIN BLOCK: MODULES -->
        <!-- IS THIS BLOCK NECESSARY? -->
        <div class="col-md-3"
            *ngIf="(selectedPhase == 'B' || selectedPhase == 'I') && (selectedModules && selectedModules != '')"></div>

        <!-- ACTIVE: Must be under Brainstorm or Improve and have selected a module (selectedPhase:B || selectedPhase:I && selectedModules !== '') -->
        <div class="col-md-9"
            *ngIf="(selectedPhase == 'B' || selectedPhase == 'I') && (selectedModules && selectedModules != '')">

            <!-- ACTIVE: This form should only appear if you haven't selected an item from the module tree while fulfilling other above requirements -->
            <mat-expansion-panel class="expanse-panel" [expanded]="true" *ngIf="!moduleItemActive || parentIsActiveSelection && selectedPhase == 'B'">
                <mat-expansion-panel-header class="page-title" >
                    <h3>Add {{ textDecoration(selectedModules) }}</h3>
                </mat-expansion-panel-header>

                <!-- ACTIVE FORM GROUP: MODULEFORM CONFLICT PRESENT -->
                <!-- DATE IDS: MOUDLE-START-DATE/MODULE-END-DATE CONFLICTS PRESENT (?) -->
                <div class="panel panel-cutom-blue" style="margin-bottom: 12px !important;">
                    <form class="p-3" [formGroup]="ModuleForm">
                        <div>

                            <!-- TOP OF FORM -->
                            <div style="display: flex;">
                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div class="col-md-6">
                                        <div style="display: flex; flex-direction: row; margin-bottom: 12px;">
                                            <label class="parent-item-label">Short Name<span>*</span></label>
                                            <input type="text" formControlName="short_name" class="parent-item-val bg-dark text-white form-control form-control-spec"
                                                placeholder="Short name"
                                                [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.short_name.errors }"
                                                autocomplete="off">
                                            <div *ngIf="isModuleFormSubmitted && mf.short_name.errors" class="invalid-feedback">
                                                <div *ngIf="mf.short_name.errors.required">Short name is required</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div style="display: flex; flex-direction: row; margin-bottom: 12px;">
                                            <label class="parent-item-label">Long Name<span>*</span></label>
                                            <input type="text" formControlName="long_name" class="parent-item-val bg-dark text-white form-control form-control-spec"
                                                placeholder="Long name"
                                                [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.long_name.errors }"
                                                autocomplete="off">
                                            <div *ngIf="isModuleFormSubmitted && mf.long_name.errors" class="invalid-feedback">
                                                <div *ngIf="mf.long_name.errors.required">Long name is required</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>  

                                <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                    <div style="display: flex;  margin-bottom: 12px;">

                                    <label class="parent-item-label" for="exampleInputPassword1">Start Date<span>*</span></label>
                                    <div class="input-group input-append bootstrap-datepicker">
                                        <input type="text" id="module-start-date" formControlName="start_date"
                                        class="text-white bg-dark parent-item-val form-control form-control-spec bg-dark date-picker" placeholder="Start Date" autocomplete="off">
                                        <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                class="fa fa-calendar"></i></span>
                                    </div>
                                    </div>
                                    <div style="display: flex;  margin-bottom: 12px; align-items: center;">
                                    <label class="parent-item-label" for="exampleInputPassword1">End Date<span>*</span></label>
                                    <div class="bg-dark input-group input-append bootstrap-datepicker">
                                        <input type="text" id="module-end-date" formControlName="end_date"
                                        class="text-white bg-dark parent-item-val form-control form-control-spec date-picker" placeholder="End Date" autocomplete="off">
                                        <span style="background-color: #8869c2;" class="input-group-addon add-on"><i
                                                class="fa fa-calendar"></i></span>
                                    </div>
                                    </div>
                                </div>

                                <div style="display: flex; flex-direction: column; flex-basis: 45%;"  *ngIf="selectedModules !== 'motive' && selectedModules !== 'analysis' && selectedModules !== 'intelligence'" [hidden]="selectedModules === 'motive' && selectedModules === 'analysis' && selectedModules === 'intelligence'">
                                    <div style="display: flex;  margin-bottom: 12px;">
                                        <label class="parent-item-label parent-item-label-alert">Production Target</label>
                                        <input type="number" formControlName="production_target" class="form-control bg-dark text-white form-control-spec parent-item-val"
                                            placeholder="Production Target"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.production_target.errors }"
                                            autocomplete="off">
                                    </div>
                                    <div style="display: flex; margin-bottom: 12px;">
                                        <label class="parent-item-label parent-item-label-alert">Expense Target</label>
                                        <input type="number" formControlName="expense_target" class="form-control bg-dark text-white form-control-spec parent-item-val"
                                            placeholder="Expense Target"
                                            [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.expense_target.errors }"
                                            autocomplete="off">
                                    </div>
                                </div>
                            </div>

                            <!-- DESCRIPTION COLUMN BREAK -->
                            <div style="display: flex;  margin-bottom: 12px;" *ngIf="selectedModules !== 'analysis' && selectedModules !== 'intelligence'" [hidden]="selectedModules === 'analysis' && selectedModules === 'intelligence'">

                                <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                    <div class=" parent-item-label-spec">{{selectedModules === 'motive' ? 'Motivation' : 'Module Details'}}</div>
                                    <textarea type="text" formControlName="description" class="form-control bg-dark"
                                    placeholder="Click to edit description" style="border-radius: 0px; border: none; border-left: 2px solid #fff; padding-left: 12px;"  [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.description.errors }"
                                    autocomplete="off"></textarea>                     
                                </div>
                            </div>

                            <!-- FORM FOR ADDING AN INITIAL ANALYSIS AND INTELLIGENCE -->
                            <div class="col-md-12 page-title" *ngIf="selectedModules == 'analysis'">
                                <h3 class="breadcrumb-header">Analysis Framework</h3>
                            </div>

    
                            <div class="col-md-12" *ngIf="selectedModules == 'analysis'">
                                <div class="form-group">
                                    <label class="parent-item-label-spec" style="margin-bottom: 12px !important;">Question</label>
                                    <textarea type="text" formControlName="question" class="form-control form-control-spec bg-dark text-white parent-item-val-spec"
                                        placeholder="Enter guiding question here..."
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.question.errors }"
                                        autocomplete="off"></textarea>
                                </div>
                            </div>

                            <div class="col-md-12" *ngIf="selectedModules == 'analysis'">
                                <div class="form-group">
                                    <label class="parent-item-label-spec" style="margin-bottom: 12px !important;">Answer</label>
                                    <textarea type="text" formControlName="answer" class="form-control form-control-spec bg-dark text-white parent-item-val-spec" placeholder="Enter best answer here..."
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.answer.errors }"
                                        autocomplete="off"></textarea>
                                </div>
                            </div>

                            <div style="display: flex; " *ngIf="selectedModules == 'intelligence'">
                            <div style="display: flex; flex-direction: column; width: 100%;">
                                <div class="col-md-12 page-title" *ngIf="selectedModules == 'intelligence'">
                                    <h3 class="breadcrumb-header">Intelligence Details</h3>
                                </div>
                                    <div style="display: flex; column-gap: 24px;">
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div *ngIf="selectedModules == 'intelligence'">
                                            <div class="form-group" style="display: flex; flex-direction: row; margin-bottom: 12px;">
                                                <label class="parent-item-label" style="margin-bottom: 12px !important;">Value</label>
                                                <input type="text" formControlName="intelligence_value" class="form-control form-control-spec bg-dark text-white parent-item-val-mod"
                                                    placeholder="Value" autocomplete="off">
                                            </div>
                                        </div>
                                        <div *ngIf="selectedModules == 'intelligence'">
                                            <div class="form-group" style="display: flex; flex-direction: row; margin-bottom: 12px;">
                                                <label class="parent-item-label">Response</label>
                                                <input type="text" formControlName="intelligence_response" class="form-control form-control-spec bg-dark text-white parent-item-val-mod"
                                                    placeholder="Response" autocomplete="off">
                                            </div>
                                        </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div
                                        *ngIf="selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                            <div class="form-group" style="display: flex; flex-direction: row; margin-bottom: 12px;">
                                                <label class="parent-item-label" style="margin-bottom: 12px !important;">Source</label>
                                                <input type="text" formControlName="source" class="form-control form-control-spec bg-dark text-white parent-item-val-mod" placeholder="Source"
                                                    [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.source.errors }"
                                                    autocomplete="off">
                                            </div>
                                        </div>
                                        <div 
                                            *ngIf="selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                            <div class="form-group" style="display: flex; flex-direction: row; margin-bottom: 12px;">
                                                <label class="parent-item-label" style="margin-bottom: 12px !important;">Link</label>
                                                <input type="text" formControlName="link" class="form-control form-control-spec bg-dark text-white parent-item-val-mod" placeholder="Link"
                                                    [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.link.errors }"
                                                    autocomplete="off">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </div>  


                            <div class="col-md-6"
                                *ngIf="selectedModules == 'analysis'">
                                <div class="form-group" style="display: flex; flex-direction: row; margin-bottom: 12px;">
                                    <label class="parent-item-label" style="margin-bottom: 12px !important;">Source</label>
                                    <input type="text" formControlName="source" class="form-control form-control-spec bg-dark text-white parent-item-val-mod" placeholder="Source"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.source.errors }"
                                        autocomplete="off">
                                </div>
                            </div>
                            <div class="col-md-6"
                                *ngIf="selectedModules == 'analysis'">
                                <div class="form-group" style="display: flex; flex-direction: row; margin-bottom: 12px;">
                                    <label class="parent-item-label" style="margin-bottom: 12px !important;">Link</label>
                                    <input type="text" formControlName="link" class="form-control form-control-spec bg-dark text-white parent-item-val-mod" placeholder="Link"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.link.errors }"
                                        autocomplete="off">
                                </div>
                            </div>
                        </div>
                        <div class="form-group text-right">
                            <button type="submit" (click)="saveModule()" class="btn btn-primary btn-space">Save</button>
                            <button type="reset" (click)="resetModule()" class="btn btn-default">Cancel</button>
                        </div>
                    </form>
                </div>
                </mat-expansion-panel>
            <div>
                
            </div>

            <!-- ACTIVE: A module item was selected from the tree while fulfilling above requirements -->
            <div *ngIf="moduleItemActive" class="panel panel-cutom-blue">
                <div class="panel-body">
                    <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
                        
                        <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                            <div  style="display: flex;  margin-bottom: 12px;">
                                <div class="parent-item-label">Short Name:</div>
                                <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                    {{childgoalDetails.short_name}}</div>
                            </div>
                            <div  style="display: flex; margin-bottom: 12px;">
                                <div class="parent-item-label">Long Name:</div>
                                <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                    {{childgoalDetails.long_name}}</div>
                            </div>
                            <div  style="display: flex;">
                                <div class="parent-item-label">Creator:</div>
                                <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                    {{parentplanDetails[0].user_id.first_name}} {{parentplanDetails[0].user_id.last_name}}</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                            <div style="display: flex; margin-bottom: 12px;">
                                <div class=" parent-item-label">Start Date:</div>
                                <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                    {{childgoalDetails.start_date !== undefined ?  (childgoalDetails.start_date | itemplanitemdate) : "Currently not available for deeply nested items"}}</div>
                            </div>
                            <div style="display: flex;  margin-bottom: 12px;">
                                <div class=" parent-item-label">End Date:</div>
                                <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                    {{childgoalDetails.end_date !== undefined ?  (childgoalDetails.end_date | itemplanitemdate) : "Currently not available for deeply nested items"}}</div>
                            </div>
                            <div style="display: flex;" *ngIf="selectedModules == 'analysis'">
                                <div class=" parent-item-label">Source:</div>
                                <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                    {{childgoalDetails.source}}</div>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; flex-basis: 45%;" *ngIf="selectedModules !== 'motive' && selectedModules !== 'analysis' && selectedModules !== 'intelligence'" [hidden]="selectedModules === 'motive' && selectedModules === 'analysis' && selectedModules === 'intelligence'">
                            <div style="display: flex; margin-bottom: 12px;">
                                <div class=" parent-item-label parent-item-label-alert">Production Target:</div>
                                <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                    {{childgoalDetails.production_target }}</div>
                            </div>
                            <div style="display: flex;">
                                <div class=" parent-item-label parent-item-label-alert">Expense Target:</div>
                                <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                    {{childgoalDetails.expense_target }}</div>
                            </div>
                        </div>
                </div>

                <div style="display: flex; flex-direction: column;" *ngIf="childgoalDetails.module_type == 'analysis' && selectedModules == 'analysis' ">
                    <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                        <div class=" parent-item-label-spec">Framework</div>
                        <div style="display: flex; flex-direction: column; padding: 12px;">
                            <!-- <div class=" parent-item-label-spec parent-item-label-alert">Question:</div> -->
                            <h4><strong>{{childgoalDetails.question}}</strong></h4>
                            <p style="border-left: 2px solid #fff; padding-left: 12px;"><strong>{{childgoalDetails.answer}}</strong></p>
                        </div>
                    </div>
                </div>

                <div style="display: flex; margin-bottom: 24px;" *ngIf="selectedModules !== 'analysis' && selectedModules !== 'intelligence'" [hidden]="selectedModules == 'analysis' || selectedModules == 'intelligence'">
                    <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;" >
                        <div class=" parent-item-label-spec">{{selectedModules === 'motive' ? 'Motivation' : 'Description' }}</div>
                        <p style="border-left: 2px solid #fff; padding-left: 24px;">{{childgoalDetails.description}}</p>
                    </div>
                </div>

                <div style="display: flex;" *ngIf="selectedModules == 'motive' && selectedModules == 'analysis' && selectedModules == 'intelligence'" [hidden]="selectedModules === 'motive' && selectedModules === 'analysis' && selectedModules === 'intelligence'">
                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                        <div style="display: flex; margin-bottom: 12px;">
                            <div class=" parent-item-label parent-item-label-alert">Production HVA:</div>
                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                {{childgoalDetails.production_high_variance_alert }}</div>
                        </div>
                        <div style="display: flex;">
                            <div class=" parent-item-label parent-item-label-alert">Expense HVA:</div>
                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                {{childgoalDetails.expense_high_variance_alert }}</div>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                        <div style="display: flex; margin-bottom: 12px;">
                            <div class=" parent-item-label parent-item-label-alert">Production LVA:</div>
                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                {{childgoalDetails.production_low_variance_alert }}</div>
                        </div>
                        <div style="display: flex;">
                            <div class=" parent-item-label parent-item-label-alert">Expense LVA:</div>
                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                {{childgoalDetails.expense_low_variance_alert }}</div>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                        <div style="display: flex; margin-bottom: 12px;">
                            <div class=" parent-item-label parent-item-label-alert">Production Weight:</div>
                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                {{childgoalDetails.production_weight }}</div>
                        </div>
                        <div style="display: flex;">
                            <div class=" parent-item-label parent-item-label-alert">Expense Weight:</div>
                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                {{childgoalDetails.expense_weight }}</div>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <!-- ACTIVE: A module item was selected from the tree while fulfilling above requirements -->
            <mat-expansion-panel class="expanse-panel" [expanded]="true" *ngIf="moduleItemActive && selectedModules !== 'task'" [hidden]="selectedModules === 'task'">
                <mat-expansion-panel-header class="page-title" >
                    <h3>Add Sub-{{ textDecoration(selectedModules) }}</h3>
                </mat-expansion-panel-header>

                <!-- ACTIVE FORM GROUP: MODULEFORM CONFLICT PRESENT -->
                <!-- DATE IDS: MOUDLE-START-DATE/MODULE-END-DATE CONFLICTS PRESENT (?) -->
                <div class="panel panel-cutom-blue">
                    <form class="p-3" [formGroup]="ModuleFormSub">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Short Name<span>*</span></label>
                                    <input type="text" formControlName="short_name" class="form-control"
                                        placeholder="Short name"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.short_name.errors }"
                                        autocomplete="off">
                                    <div *ngIf="isModuleFormSubmitted && mf.short_name.errors" class="invalid-feedback">
                                        <div *ngIf="mf.short_name.errors.required">Short name is required</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Long Name<span>*</span></label>
                                    <input type="text" formControlName="long_name" class="form-control"
                                        placeholder="Long name"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.long_name.errors }"
                                        autocomplete="off">
                                    <div *ngIf="isModuleFormSubmitted && mf.long_name.errors" class="invalid-feedback">
                                        <div *ngIf="mf.long_name.errors.required">Long name is required</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" [hidden]="selectedModules == 'analysis'">
                                <div class="form-group">
                                    <label>Module Details<span>*</span></label>
                                    <textarea formControlName="description" class="form-control" placeholder="Description"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.description.errors }"
                                        autocomplete="off"></textarea>
                                </div>
                            </div>
                            <div class="col-md-6"
                                [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                <div class="form-group">
                                    <label>Production Target</label>
                                    <input type="number" formControlName="production_target" class="form-control"
                                        placeholder="Production Target"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.production_target.errors }"
                                        autocomplete="off">
                                </div>
                            </div>
                            <div class="col-md-6"
                                [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                <div class="form-group">
                                    <label>Expense Target</label>
                                    <input type="number" formControlName="expense_target" class="form-control"
                                        placeholder="Expense Target"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.expense_target.errors }"
                                        autocomplete="off">
                                </div>
                            </div>
    
                            <div class="col-md-12 page-title mt-30" *ngIf="selectedModules == 'analysis'">
                                <h3 class="breadcrumb-header">Analysis Framework</h3>
                            </div>
                            <div class="col-md-12 page-title mt-30" *ngIf="selectedModules == 'intelligence'">
                                <h3 class="breadcrumb-header">Intelligence Details</h3>
                            </div>
    
                            <div class="col-md-12" *ngIf="selectedModules == 'analysis'">
                                <div class="form-group">
                                    <label>Question</label>
                                    <input type="text" formControlName="question" class="form-control"
                                        placeholder="Question"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.question.errors }"
                                        autocomplete="off">
                                </div>
                            </div>
                            <div class="col-md-12" *ngIf="selectedModules == 'analysis'">
                                <div class="form-group">
                                    <label>Answer</label>
                                    <input type="text" formControlName="answer" class="form-control" placeholder="Answer"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.answer.errors }"
                                        autocomplete="off">
                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="selectedModules == 'intelligence'">
                                <div class="form-group">
                                    <label>Value</label>
                                    <input type="text" formControlName="intelligence_value" class="form-control"
                                        placeholder="Value" autocomplete="off">
                                </div>
                            </div>
                            <div class="col-md-6" *ngIf="selectedModules == 'intelligence'">
                                <div class="form-group">
                                    <label>Response</label>
                                    <input type="text" formControlName="intelligence_response" class="form-control"
                                        placeholder="Response" autocomplete="off">
                                </div>
                            </div>
                            <div class="col-md-6"
                                *ngIf="selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                <div class="form-group">
                                    <label>Source</label>
                                    <input type="text" formControlName="source" class="form-control" placeholder="Source"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.source.errors }"
                                        autocomplete="off">
                                </div>
                            </div>
                            <div class="col-md-6"
                                *ngIf="selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                <div class="form-group">
                                    <label>Link</label>
                                    <input type="text" formControlName="link" class="form-control" placeholder="Link"
                                        [ngClass]="{ 'is-invalid': isModuleFormSubmitted && mf.link.errors }"
                                        autocomplete="off">
                                </div>
                            </div>
                            <div class="col-md-6 form-group"
                                *ngIf="selectedModules == 'analysis' || selectedModules == 'intelligence'">
                                <label>Attachment</label>
                                <input type="file" (change)="uploadAttachment($event.target.files)">
                            </div>
                        </div>
                        <div class="form-group text-right">
                            <button type="submit" (click)="saveModuleSub()" class="btn btn-primary btn-space">Save</button>
                            <button type="reset" (click)="resetModule()" class="btn btn-default">Cancel</button>
                        </div>
                    </form>
                </div>
            </mat-expansion-panel>


            <!-- VIEW MODULE ITEMS LIST -->
            <mat-expansion-panel class="expanse-panel">
            <mat-expansion-panel-header class="">
                <div class="page-title">
                    <h3>View {{ textDecoration(selectedModules) }} List</h3>
                </div>
            </mat-expansion-panel-header>

            <!-- VARIOUS DATA TABLES FOR THE VARIOUS STRATEGIES HAVE RESPECTIVE IDS -->
            <div class="panel panel-cutom-blue">
                <div class="panel-body">
                    <table class="display table table-data-width" id="table-module" datatable *ngIf="moduleGoals.length != 0 && selectedModules == 'strategy'"> 
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Production Target</th>
                                <th class="prioritize-blue">Expense Target</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of moduleGoals; let i=index;">
                                <td>{{ p.short_name }}</td>
                                <td>{{ p.start_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ p.end_date | date:'dd/MM/yyyy'}}</td>
                                <td>{{ p.production_target }}</td>
                                <td>{{ p.expense_target }}</td>
                            </tr>

                        </tbody>
                    </table>
                    <table class="display table table-data-width" id="table-module" datatable *ngIf="moduleGoals.length != 0 && selectedModules == 'opportunity'"> 
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Production Target</th>
                                <th class="prioritize-blue">Expense Target</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of moduleGoals; let i=index;">
                                <td>{{ p.short_name }}</td>
                                <td>{{ p.start_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ p.end_date | date:'dd/MM/yyyy'}}</td>
                                <td>{{ p.production_target }}</td>
                                <td>{{ p.expense_target }}</td>
                            </tr>

                        </tbody>
                    </table>
                    <table class="display table table-data-width" id="table-module" datatable *ngIf="moduleGoals.length != 0 && selectedModules == 'problem'"> 
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Production Target</th>
                                <th class="prioritize-blue">Expense Target</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of moduleGoals; let i=index;">
                                <td>{{ p.short_name }}</td>
                                <td>{{ p.start_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ p.end_date | date:'dd/MM/yyyy'}}</td>
                                <td>{{ p.production_target }}</td>
                                <td>{{ p.expense_target }}</td>
                            </tr>

                        </tbody>
                    </table>
                    <table class="display table table-data-width" id="table-module-p" datatable *ngIf="moduleGoals.length != 0 && selectedModules == 'task'"> 
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Production Target</th>
                                <th class="prioritize-blue">Expense Target</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of moduleGoals; let i=index;">
                                <td>{{ p.short_name }}</td>
                                <td>{{ p.start_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ p.end_date | date:'dd/MM/yyyy'}}</td>
                                <td>{{ p.production_target }}</td>
                                <td>{{ p.expense_target }}</td>
                            </tr>

                        </tbody>
                    </table>
                    <table class="display table table-data-width" id="table-module-m" datatable *ngIf="moduleGoals.length != 0 && selectedModules == 'motive'"> 
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Motivation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of moduleGoals; let i=index;">
                                <td>{{ p.short_name }}</td>
                                <td>{{ p.start_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ p.end_date | date:'dd/MM/yyyy'}}</td>
                                <td>{{ p.description }}</td>
                            </tr>

                        </tbody>
                    </table>
                    <table class="display table table-data-width" id="table-module-a" datatable *ngIf="moduleGoals.length != 0 && selectedModules == 'analysis'"> 
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Question</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of moduleGoals; let i=index;">
                                <td>{{ p.short_name }}</td>
                                <td>{{ p.start_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ p.end_date | date:'dd/MM/yyyy'}}</td>
                                <td>{{ p.question }}</td>
                            </tr>

                        </tbody>
                    </table>
                    <table class="display table table-data-width" id="table-module-i" datatable *ngIf="moduleGoals.length != 0 && selectedModules == 'intelligence'"> 
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th class="prioritize-blue">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of moduleGoals; let i=index;">
                                <td>{{ p.short_name }}</td>
                                <td>{{ p.start_date | date:'dd/MM/yyyy' }}</td>
                                <td>{{ p.end_date | date:'dd/MM/yyyy'}}</td>
                                <td>{{ p.description }}</td>
                            </tr>

                        </tbody>
                    </table>
                    <table class="display table table-data-width" *ngIf="moduleGoals.length == 0">
                        <thead>
                            <tr>
                                <th class="prioritize-blue">Short Name</th>
                                <th class="prioritize-blue">Start Date</th>
                                <th class="prioritize-blue">End Date</th>
                                <th *ngIf="selectedModules !== 'motive' && selectedModules !== 'analysis' && selectedModules !== 'intelligence'" [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'" class="prioritize-blue">Production Target</th>
                                <th *ngIf="selectedModules !== 'motive' && selectedModules !== 'analysis' && selectedModules !== 'intelligence'" [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'" class="prioritize-blue">Expense Target</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                               <td colspan="5">Data not found</td>
                               <td style="display: none;">-</td>
                               <td style="display: none;">-</td>
                               <td *ngIf="selectedModules !== 'motive' && selectedModules !== 'analysis' && selectedModules !== 'intelligence'" [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'" style="display: none;">-</td>
                               <td *ngIf="selectedModules !== 'motive' && selectedModules !== 'analysis' && selectedModules !== 'intelligence'" [hidden]="selectedModules == 'motive' || selectedModules == 'analysis' || selectedModules == 'intelligence'" style="display: none;">-</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
            </mat-expansion-panel>

            <!-- VIEW PARENT ITEM DETAILS DROP DOWN ON MODULE ITEMS -->
            <mat-expansion-panel class="expanse-panel" *ngIf="moduleItemActive">
                <mat-expansion-panel-header class="page-title">
                    <h3>Parent Project Details</h3>
                </mat-expansion-panel-header>
                <div class="panel panel-cutom-blue">
                    <div class="panel-body">
                        <div style="padding: 10px;">
                            <div class="text-right" style="margin-bottom: 24px;">
                                <button routerLink="/item-plans/{{ goalplanid }}" class="btn btn-warning"><i
                                        class="fa fa-comments"></i></button>
                            </div>
                            <div style="display: flex; flex-direction: row; gap: 24px; margin-bottom: 24px;">
                                    <!-- <div *ngIf="parentplan.key=='user_id' ">
                                        <div class="parent-item-label">Creator:</div>
                                        <div class=" text-white " *ngIf="parentplan.key !='userid' ">
                                            {{parentplan.value.first_name}} {{parentplan.value.last_name}}</div>
                                    </div> -->
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div  style="display: flex;  margin-bottom: 12px;">
                                            <div class="parent-item-label">Short Name:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{parentplanDetails[0].short_name}}</div>
                                        </div>
                                        <div  style="display: flex;">
                                            <div class="parent-item-label">Long Name:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{parentplanDetails[0].long_name}}</div>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex; margin-bottom: 12px;">
                                            <div class=" parent-item-label">Start Date:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{parentplanDetails[0].start_date | itemplanitemdate }}</div>
                                        </div>
                                        <div style="display: flex;">
                                            <div class=" parent-item-label">End Date:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{parentplanDetails[0].end_date | itemplanitemdate }}</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; flex-basis: 45%;">
                                        <div style="display: flex; margin-bottom: 12px;">
                                            <div class=" parent-item-label parent-item-label-alert">Production Target:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{parentplanDetails[0].production_target }}</div>
                                        </div>
                                        <div style="display: flex;">
                                            <div class=" parent-item-label parent-item-label-alert">Expense Target:</div>
                                            <div class="text-white bg-dark parent-item-val" style="padding: 6px;">
                                                {{parentplanDetails[0].expense_target }}</div>
                                        </div>
                                    </div>

                            </div>
                            <div style="display: flex; margin-bottom: 12px;">
                                <div class="text-white bg-dark parent-item-val-spec" style="padding: 6px;">
                                    <div class=" parent-item-label-spec">Description</div>
                                    <p>{{parentplanDetails[0].description}}</p>
                                </div>
                            </div>
                            <hr>
                            
                        </div>
                    </div>
                </div>
            </mat-expansion-panel>
        </div>
    <!-- END BLOCK: MODULES -->


    </div>
</div>
<app-footer></app-footer>
<!-- END PAGE CONTENT -->


<!-- BEGIN BLOCK: DELEGATE MODAL -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="min-width: 880px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Delegate {{goalname}}</h4>
            </div>
            <div class="modal-body">
                <div class="table-responsive" style="height: 250px;overflow:auto;" id="style-2">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Delegated User</th>
                                <th>Percentage</th>
                                <th>User</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="goalDelegateData && goalDelegateData.length==0">
                                <td style="text-align: center;" colspan="5"> No Data Available</td>
                            </tr>
                            <tr *ngFor="let p of goalDelegateData; let i=index;">
                                <th scope="row">{{i+1}}</th>
                                <td>{{p.child_user_id.first_name}} {{p.child_user_id.last_name}}</td>
                                <td>{{p.percentage}}%</td>
                                <td>{{p.user_id.first_name}} {{p.user_id.last_name}}</td>
                                <td *ngIf="p.is_accept==0" class="text-warning">Pending</td>
                                <td *ngIf="p.is_accept==1" class="text-success">Accept</td>
                                <td *ngIf="p.is_accept==2" class="text-danger">Reject</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <form [formGroup]="DelegateForm">
                    <div class="form-group">
                        <label>Child User</label>
                        <select class="form-control" formControlName="child_user_id" style="padding: 0px 0px!important"
                            [ngClass]="{ 'is-invalid': isDelegateFormSubmitted && df.child_user_id.errors }">
                            <option value="">Select Child User</option>
                            <option *ngFor="let child of childuser;" value="{{child._id}}">{{child.first_name}}
                                {{child.last_name}}</option>
                        </select>
                        <div *ngIf="isDelegateFormSubmitted && df.child_user_id.errors" class="invalid-feedback">
                            <div *ngIf="df.child_user_id.errors.required">Please Select Child User</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Percentage</label>
                        <input type="number" autocomplete="off" formControlName="percentage" class="form-control"
                            placeholder="Percentage"
                            [ngClass]="{ 'is-invalid': isDelegateFormSubmitted && df.percentage.errors }">
                        <div *ngIf="isDelegateFormSubmitted && df.percentage.errors" class="invalid-feedback">
                            <div *ngIf="df.percentage.errors.required">Percentage is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea type="text" formControlName="description" class="form-control"
                            placeholder="Description"
                            [ngClass]="{ 'is-invalid': isDelegateFormSubmitted && df.description.errors }"></textarea>
                        <div *ngIf="isDelegateFormSubmitted && df.description.errors" class="invalid-feedback">
                            <div *ngIf="df.description.errors.required">Description is required</div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-success" (click)="SaveDelegate()">Save</button>
            </div>
        </div>
    </div>
</div>
<!-- END BLOCK: DELEGATE MODAL -->

<!-- BEGIN BLOCK: FEEDBACK MODAL -->
<div class="modal" style="display: unset !important;" id="myModal" tabindex="-1" *ngIf="feedbackModalOpen" aria-labelledby="myModalLabel"
    [hidden]="!feedbackModalOpen"
>
    <div class="modal-dialog" style="min-width: 880px;">
        <div class="modal-content">
            <div class="modal-header">
                <button (click)="openFeedbackModal()" type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">User Feedback</h4>
            </div>
            <div class="modal-body">
                <form [formGroup]="FeedbackForm">
                    <div class="form-group">
                        <label>Subject</label>
                        <input type="text" autocomplete="off" formControlName="subject" class="form-control"
                            placeholder="Subject">
                    </div>
                    <div class="form-group">
                        <label>Section</label>
                        <input type="text" autocomplete="off" formControlName="section" class="form-control"
                        placeholder="Section">
                    </div>
                    <div class="form-group">
                        <label>Message</label>
                        <textarea type="text" autocomplete="off" formControlName="feedback_message" class="form-control"
                        placeholder="Enter feedback here..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>How would you rate your overall experience with Rapifly?</label>
                        <select formControlName="overall_rating" class="form-control">
                            <option value="">Select Rating</option>
                            <option value=1>Perfect</option>
                            <option value=2>Good</option>
                            <option value=3>Alright</option>
                            <option value=4>Could be better</option>
                            <option value=5>Terrible</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>How likely are you to share your Rapifly experience with a friend?</label>
                        <select formControlName="share_rating" class="form-control">
                            <option value="">Select Rating</option>
                            <option value=1>Very likely</option>
                            <option value=2>Likely</option>
                            <option value=3>Less likely</option>
                            <option value=4>Not at all</option>
                        </select>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" (click)="clearFeedback()">Clear</button>
                <button type="submit" class="btn btn-success" (click)="SubmitFeedback()">Submit</button>
            </div>
        </div>
    </div>
</div>
<!-- END BLOCK: FEEDBACK MODAL -->

<!-- BEGIN BLOCK: REPORT MODAL -->
<form action="javascript:void(0);" [formGroup]="ReportForm">
    <div class="modal fade" id="reportModal" tabindex="-1" role="dialog" aria-labelledby="reportModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" style="min-width: 400px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="reportModalLabel">Add Report Details</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Actual Production</label>
                        <input type="number" autocomplete="off" formControlName="actual_production" class="form-control"
                            placeholder="Actual Production"
                            [ngClass]="{ 'is-invalid': isReportFormSubmitted && rf.actual_production.errors }">
                        <div *ngIf="isReportFormSubmitted && rf.actual_production.errors" class="invalid-feedback">
                            <div *ngIf="rf.actual_production.errors.required">Actual production is required</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Actual Expense</label>
                        <input type="number" autocomplete="off" formControlName="actual_expense" class="form-control"
                            placeholder="Actual Expense"
                            [ngClass]="{ 'is-invalid': isReportFormSubmitted && rf.actual_expense.errors }">
                        <div *ngIf="isReportFormSubmitted && rf.actual_expense.errors" class="invalid-feedback">
                            <div *ngIf="rf.actual_expense.errors.required">Actual expense is required</div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-success" (click)="SaveReport()">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- END BLOCK: REPORT MODAL -->

<!-- BEGIN BLOCK: MANAGE ADDITIONAL FORMS MODAL -->
<form class="form-inline" action="javascript:void(0);">
    <div class="modal fade" id="fromControlModal" tabindex="-1" role="dialog" aria-labelledby="fromControlModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" style="min-width: 780px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="fromControlModalLabel">Manage Additional Fields</h4>
                </div>
                <div class="modal-body">
                    <div>
                        <p>
                            Not enough fields to describe your plan? With Rapifly's user-oriented design, plans
                            can be customized and extended to meet your team's needs. To get started, fill out a new field,
                            and watch as your plans expand to become your own!
                        </p>
                    </div>
                    <div>
                        <button type="button" class="btn btn-default m-b-xxs" (click)="onAddData()">Add Field</button>
                    </div>
                    <div *ngFor="let dev of formfield;index as i">
                        <div class="form-group" style="padding: 3px;">
                            <input type="text" id="data{{i}}" [ngModelOptions]="{standalone: true}"
                                [(ngModel)]="dev.name" class="form-control" placeholder="Name Of FormControl"
                                autocomplete="off">
                        </div>
                        &nbsp;
                        <div class="form-group" style="padding: 3px;">
                            <select class="form-control" (change)="addcontrol(i)"
                                (change)="getselectoption(selected.value,i)" #selected
                                [ngModelOptions]="{standalone: true}" [(ngModel)]="dev.type"
                                style="padding: 0px 0px!important">
                                <option value="">Select FormControl</option>
                                <option value="text">Text</option>
                                <option value="number">Number</option>
                                <option value="select">Select</option>
                            </select>
                        </div>
                        &nbsp;
                        <div class="form-group" style="padding: 3px;">
                            <select class="form-control" [ngModelOptions]="{standalone: true}"
                                [(ngModel)]="dev.required" style="padding: 0px 0px!important">
                                <option value="">Select Required</option>
                                <option value="true">True</option>
                                <option value="false">False</option>
                            </select>
                        </div>
                        <div class="form-group" *ngIf="dev.option && dev.option.length == 0" style="padding: 3px;">
                            <button class="btn btn-primary" style="margin: 4px;height: 36px;" (click)="addoption(i)">Add
                                option</button>
                        </div>
                        <div class="form-group" *ngIf="dev.option && dev.option.length > 0" style="padding: 3px;">
                            <button class="btn btn-primary" style="margin: 4px;height: 36px;"
                                (click)="addoption(i)">Modify option</button>
                        </div>
                        <button class="btn btn-danger" style="margin: 4px;height: 36px;"
                            (click)="removeData(i)">X</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success" (click)="onplanformcreate()">Save</button>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- END BLOCK: MANAGE ADDITIONAL FORMS MODAL -->

<!-- BEGIN BLOCK: MANAGE OPTIONS FOR SELECT MODAL -->
<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="min-width: 480px;">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Add Option</h4>
            </div>
            <div class="modal-body">
                <div>
                    <button type="button" class="btn btn-default m-b-xxs" (click)="onAddoption()">Add new
                        Option</button>
                </div>
                <input type="hidden" value="" id="controlid">
                <div *ngFor="let dev of selectoption;index as i">
                    <div class="form-group" style="padding: 3px;margin: 0;">
                        <input type="text" id="data-modal{{i}}" style="width:300px;display: inline;"
                            [ngModelOptions]="{standalone: true}" [(ngModel)]="dev.id" class="form-control"
                            placeholder="Name Of FormControl" autocomplete="off">
                        <button class="btn btn-danger" style="margin: 4px;height: 33px;margin-bottom: 8px"
                            (click)="removeoption(i)">X</button>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-success" (click)="saveoption()">Save</button>
            </div>
        </div>
    </div>
</div>
<!-- END BLOCK: MANAGE OPTIONS FOR SELECT MODAL -->


<!-- BEGIN BLOCK: RECIPIENT INVITE MODAL -->
<!-- DO NOT DELETE -->
<!-- <div class="modal fade" id="inviteModal" tabindex="-1" role="dialog" aria-labelledby="inviteModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="min-width: 880px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="inviteModalLabel">Invite Users</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal" [formGroup]="inviteUserForm">
                    <div class="form-group m-t-xs">
                        <label class="col-sm-3 control-label">Designation</label>
                        <div class="col-sm-6">
                            <select class="form-control" formControlName="hierarchy_id" id="hierarchy_id" [ngClass]="{ 'is-invalid': isInviteUserFormValid && formVal.hierarchy_id.errors }">
                                        <option value="">Select Designation</option>
                                      <option *ngFor="let desg of designations;" value="{{desg._id}}">{{ desg.designation }}</option>
                                    </select>
                            <div *ngIf="isInviteUserFormValid && formVal.hierarchy_id.errors" class="invalid-feedback">
                                <div *ngIf="formVal.hierarchy_id.errors.required">Please select any organization</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group m-t-xs">
                        <label class="col-sm-3 control-label">Email</label>
                        <div class="col-sm-6">
                            <input type="email" class="form-control" formControlName="email" placeholder="Email" [ngClass]="{ 'is-invalid': isInviteUserFormValid && formVal.email.errors }">
                            <div *ngIf="isInviteUserFormValid && formVal.email.errors" class="invalid-feedback">
                                <div *ngIf="formVal.email.errors.required">Email is required</div>
                                <div *ngIf="formVal.email.errors.email">Please enter valid email address</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-7 col-sm-6">
                            <button type="submit" (click)="submit()" class="btn btn-success horizontal-form-button">Invite User</button>&nbsp;
                            <button type="reset" class="btn btn-default horizontal-form-button" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div> -->
<!-- END BLOCK: RECIPIENT INVITE MODAL -->